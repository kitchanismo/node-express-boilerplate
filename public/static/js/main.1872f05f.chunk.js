(this["webpackJsonpcra-type"]=this["webpackJsonpcra-type"]||[]).push([[0],{199:function(e){e.exports=JSON.parse('{"a":"http://localhost:5000/api/"}')},342:function(e,t,n){},343:function(e,t,n){"use strict";n.r(t);var a=n(1),i=n(0),c=n.n(i),r=n(23),o=n.n(r),l=n(20),s=n(5),d=n(434),u=n(8),j=n(32),m=n(49),b=n(414),p=n(351),O=n(415),h=n(209),v=n.n(h),f=n(416),x=n(411),g=n(407),y=n(208),S=n.n(y),_=n(153),T=n.n(_),E=n(203),L=n.n(E),A=n(152),C=n.n(A),I=n(202),w=n.n(I),k=n(204),N=n.n(k),B=n(205),D=n.n(B),R=n(154),F=n.n(R),M=n(151),P=n.n(M),G=n(201),W=n.n(G),U=n(155),H=n.n(U),q=n(353),K=n(118),z=n.n(K),V=n(409),Y=n(408),X=n(412),J=n(410),Q=n(103),Z=n.n(Q),$=n(397),ee=n(214),te=n(45),ne=n(24),ae=n.n(ne),ie=n(198),ce=function(e){return ae.a.string().required().label(e).regex(/^[A-Za-z\s]*$/).error((function(t){return t.forEach((function(t){switch(t.code){case"string.empty":t.message='"'.concat(e,'" is required');break;case"string.pattern.base":t.message='"'.concat(e,'" must not have a number or special character')}})),t}))},re=function(e){return ae.a.required().not(null).not("").messages({"any.invalid":'"'.concat(e,'" is required'),"any.required":'"'.concat(e,'" is required')})},oe=function(){var e=localStorage.getItem("access_token");try{if(e)return Object(ie.a)(e)}catch(t){return null}},le=function(){return oe()?Object(u.a)({},oe().data):null},se=function(e){localStorage.setItem("access_token",e)},de=function(e){if(!e)return 0;var t=new Date(new Date(e).toLocaleDateString()),n=Date.now()-t.getTime(),a=new Date(n);return Math.abs(a.getUTCFullYear()-1970)},ue=function(e){return"\u20b1 "+e.toLocaleString()},je=Object(i.createContext)(null),me=function(e,t){switch(t.type){case"SET_ALERT":e.alert=t.payload;break;case"HIDE_ALERT":e.alert=null;break;case"SET_TITLE":e.title=t.payload;break;case"SET_IS_LOADING":e.isLoading=t.payload;break;case"TOGGLE_THEME":e.isDark=!e.isDark;break;case"SET_THEME":e.isDark=t.payload;break;case"SET_CURRENT_USER":e.currentUser=t.payload;break;default:return e}return e},be=function(e){var t=Object(i.useReducer)(Object(te.a)(me),{alert:null,title:"PSY INSURANCE",isDark:!1,isLoading:!1,currentUser:null}),n=Object(s.a)(t,2),c=n[0],r=n[1];Object(i.useEffect)((function(){r({type:"SET_CURRENT_USER",payload:le()}),console.log("hit")}),[]);var o=Object(ee.a)({overrides:{MuiButton:{root:{borderRadius:30,paddingTop:15,paddingBottom:15}},MuiCssBaseline:{"@global":{body:{backgroundColor:c.isDark?"#303030":"#fafafa"}}}},typography:{fontFamily:["Arial"].join(",")},palette:{type:c.isDark?"dark":"light",primary:{main:"#9C27B0"},secondary:{main:"#E91E63"}}});return Object(i.useEffect)((function(){var e=localStorage.getItem("theme")||"light";r({type:"SET_THEME",payload:"dark"===e})}),[]),Object(a.jsx)(a.Fragment,{children:Object(a.jsx)($.a,{theme:o,children:Object(a.jsx)(je.Provider,{value:[c,r],children:e.children})})})},pe=n(206),Oe=n.n(pe),he=n(207),ve=n.n(he),fe=n(404),xe=n(398),ge=n(403),ye=n(401),Se=n(402),_e=n(400),Te=function(e){var t=e.data,n=t.open,i=t.text,c=t.description,r=e.onAgree,o=e.onDisagree;return Object(a.jsx)("div",{children:n&&Object(a.jsxs)(xe.a,{open:n||!1,onClose:o,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description",children:[Object(a.jsx)(_e.a,{id:"alert-dialog-title",children:i}),Object(a.jsx)(ye.a,{children:Object(a.jsx)(Se.a,{id:"alert-dialog-description",children:c})}),Object(a.jsxs)(ge.a,{children:[Object(a.jsx)(fe.a,{onClick:o,color:"default",children:"Cancel"}),Object(a.jsx)(fe.a,{style:{marginRight:10},onClick:r,color:"secondary",children:"Agree"})]})]})})},Ee=n(58),Le=n.n(Ee),Ae=n(199),Ce=n(200),Ie=n.n(Ce);Le.a.interceptors.request.use((function(e){e.baseURL=Ae.a;var t=localStorage.getItem("access_token");return t&&(e.headers.Authorization="Bearer ".concat(t)),e.withCredentials=!0,e})),Le.a.interceptors.response.use((function(e){return e}),(function(e){if("Network Error"===e.message||"Internal Server Error"===e.message)throw Error(e.message);throw"406"===(null===e||void 0===e?void 0:e.code)&&(window.location.href="/signin"),e})),Ie()(Le.a,(function(e){return Le.a.get("/auth/refresh-token").then((function(e){var t=e.data;return localStorage.setItem("access_token",t.access_token),Promise.resolve()})).catch((function(e){406===e.response.status&&(localStorage.removeItem("access_token"),window.location.href="/signin")}))}),{statusCodes:[403],pauseInstanceWhileRefreshing:!0});var we={get:Le.a.get,post:Le.a.post,put:Le.a.put,delete:Le.a.delete,axios:Le.a.create()},ke=function(e){var t=e.username,n=e.password;return we.post("/auth/signin",{username:t,password:n}).then((function(e){return e.data.access_token}))},Ne=n(443),Be=n(405),De=n(406),Re=function(e){var t=e.width,n=e.height;return Object(Be.a)((function(e){return Object(De.a)({avatar:{width:t||100,height:n||100,backgroundColor:e.palette.secondary.main}})}))},Fe=function(e){var t=e.onClick,n=e.src,i=e.width,c=e.height,r=e.children,o=Re({width:i,height:c})();return Object(a.jsx)(p.a,{onClick:t,children:Object(a.jsx)(Ne.a,{className:o.avatar,src:n,"aria-label":"clients",children:null===r||void 0===r?void 0:r()})})},Me=function(e){return we.post("/users",e).then((function(e){return e.data}))},Pe=function(e){return we.put("/users/"+e.id,e).then((function(e){return e.data}))},Ge=function(e){return we.put("/users/account/"+e.id,e).then((function(e){return e.data}))},We=function(){return we.get("/users/me").then((function(e){return e.data}))},Ue=z()((function(e){return{root:{width:270,backgroundColor:e.palette.background.paper},nested:{paddingLeft:e.spacing(2)},close:{paddingTop:5,paddingRight:5},logout:{marginTop:10,color:e.palette.secondary.main}}})),He=function(e){var t,n,r,o=Ue(),l=Object(j.g)(),d=c.a.useContext(je),u=Object(s.a)(d,2),b=u[0],O=u[1],h=Object(i.useState)(""),v=Object(s.a)(h,2),f=v[0],y=v[1],_=(Object(i.useState)(!1),Object(i.useState)(!1),Object(i.useState)(!1),Object(i.useState)(!1),Object(i.useState)({})),E=Object(s.a)(_,2),A=E[0],I=E[1];Object(i.useEffect)((function(){We().then((function(e){return I(e)}))}),[]);var k=[{name:"Transaction",subMenus:[{name:"Encode Transaction",path:"/transaction/encode",icon:Object(a.jsx)(P.a,{})},{name:"Release Transaction",path:"/transaction/releases",icon:Object(a.jsx)(W.a,{})}]},{name:"Management",subMenus:[{name:"Branch Management",path:"/branches",icon:Object(a.jsx)(C.a,{})},{name:"Client Management",path:"/clients",icon:Object(a.jsx)(w.a,{})},{name:"Employee Management",path:"/employees",icon:Object(a.jsx)(T.a,{})},{name:"User Management",path:"/users",icon:Object(a.jsx)(L.a,{})}]},{name:"History",subMenus:[{name:"Payment History",path:"/payments",icon:Object(a.jsx)(N.a,{})},{name:"Commission History",path:"/commissions",icon:Object(a.jsx)(D.a,{})}]},{name:"Settings",subMenus:[{name:"General Settings",path:"/settings/general",icon:Object(a.jsx)(F.a,{})},{name:"Account Settings",path:"/settings/account",icon:Object(a.jsx)(H.a,{})}]}],B=[{name:"Client Registration",path:"/clients/new",icon:Object(a.jsx)(C.a,{})},{name:"Employee Registration",path:"/employees/new",icon:Object(a.jsx)(T.a,{})},{name:"Encode Transaction",path:"/transaction/encode",icon:Object(a.jsx)(P.a,{})},{name:"General Settings",path:"/settings/general",icon:Object(a.jsx)(F.a,{})},{name:"Account Settings",path:"/settings/account",icon:Object(a.jsx)(H.a,{})}],R=function(t){return Object(a.jsx)(g.a,{component:"div",disablePadding:!0,children:Object(a.jsxs)(q.a,{onClick:function(){e.onToggle(t.name),l.replace(t.path)},button:!0,className:o.nested,children:[Object(a.jsx)(Y.a,{style:{paddingLeft:20},children:t.icon}),Object(a.jsx)(V.a,{primary:t.name})]})})},M=function(e){var t=f===e.name;return Object(a.jsxs)(a.Fragment,{children:[Object(a.jsxs)(q.a,{style:{paddingLeft:30},button:!0,onClick:function(){return t=e.name,void y((function(e){return e===t?"":t}));var t},children:[Object(a.jsx)(V.a,{primary:e.name}),t?Object(a.jsx)(Oe.a,{}):Object(a.jsx)(ve.a,{})]}),Object(a.jsx)(J.a,{in:t,timeout:"auto",unmountOnExit:!0,children:e.subMenus.map((function(e){return R(e)}))})]})},G=Object(i.useState)({}),U=Object(s.a)(G,2),K=U[0],z=U[1];return Object(a.jsxs)(x.a,{anchor:"left",open:e.isActive,ModalProps:{onBackdropClick:function(){return e.onToggle()}},children:[Object(a.jsx)(Te,{onAgree:function(){e.onToggle(),z({open:!1}),we.get("/auth/signout").then((function(e){return e.data})).then((function(){localStorage.removeItem("access_token"),O({type:"SET_CURRENT_USER",payload:null})})).catch((function(){localStorage.removeItem("access_token"),O({type:"SET_CURRENT_USER",payload:null})}))},onDisagree:function(){return z({open:!1})},data:K}),Object(a.jsx)(Z.a,{container:!0,justify:"flex-end",children:Object(a.jsx)(p.a,{onClick:function(){return e.onToggle()},edge:"start",color:"inherit","aria-label":"menu",children:Object(a.jsx)(S.a,{})})}),(null===A||void 0===A?void 0:A.id)&&Object(a.jsxs)(a.Fragment,{children:[Object(a.jsxs)(Z.a,{alignItems:"flex-end",justify:"center",direction:"row",style:{paddingLeft:10,paddingRight:10,width:280},container:!0,children:[Object(a.jsx)(Z.a,{item:!0,container:!0,xs:4,children:Object(a.jsx)(Fe,{width:70,height:70,src:null===A||void 0===A?void 0:A.image_url})}),Object(a.jsxs)(Z.a,{style:{paddingLeft:10},xs:8,item:!0,justify:"flex-start",container:!0,direction:"column",children:[Object(a.jsx)(m.a,{variant:"subtitle1",color:"textPrimary",children:"".concat(null===A||void 0===A?void 0:A.lastname,", ").concat(null===A||void 0===A?void 0:A.firstname," ").concat(null===A||void 0===A?void 0:A.middlename)}),Object(a.jsx)(m.a,{variant:"subtitle1",color:"textSecondary",children:"".concat(null===A||void 0===A||null===(t=A.branch)||void 0===t?void 0:t.name," - ").concat(null===A||void 0===A?void 0:A.role)})]})]}),Object(a.jsx)(X.a,{style:{marginTop:10,marginLeft:10,marginRight:10}})]}),Object(a.jsxs)(g.a,{className:o.root,component:"nav","aria-labelledby":"nested-list-subheader",children:["admin"===(null===(n=b.currentUser)||void 0===n?void 0:n.role)&&k.map((function(e){return M(e)})),"cashier"===(null===(r=b.currentUser)||void 0===r?void 0:r.role)&&B.map((function(e){return R(e)}))]}),Object(a.jsx)(X.a,{style:{marginTop:10,marginLeft:10,marginRight:10}}),Object(a.jsx)(q.a,{style:{paddingLeft:30},button:!0,children:Object(a.jsx)(V.a,{className:o.logout,primary:"Logout",onClick:function(){z({text:"Are you sure do you want to logout?",open:!0})}})})]})},qe=n(413),Ke=n(354),ze=n(417),Ve=function(e){var t=i.useContext(je),n=Object(s.a)(t,2),c=n[0],r=n[1],o=(Object(j.g)(),i.useState(!1)),l=Object(s.a)(o,2),d=l[0],h=l[1],x=function(e){h((function(e){return!e})),e&&r({type:"SET_TITLE",payload:e})};function g(e){var t=e.children,n=e.window,i=Object(qe.a)({target:n?n():void 0});return Object(a.jsx)(Ke.a,{appear:!1,direction:"down",in:!i,children:t})}return Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)(He,{onToggle:x,isActive:d}),Object(a.jsx)(g,Object(u.a)(Object(u.a)({},e),{},{children:Object(a.jsxs)(b.a,{style:{background:"linear-gradient(to right, #9c27b0, #9c27b0, #9c27b0, #9c27b0, #9c27b0, #a721aa, #b119a4, #ba119e, #cb0090, #d80081, #e20672, #e91e63)"},children:[Object(a.jsx)(O.a,{children:Object(a.jsxs)(f.a,{container:!0,xs:12,justify:"center",children:[Object(a.jsx)(f.a,{container:!0,xs:1,sm:5,md:4,justify:"flex-start",children:Object(a.jsx)(p.a,{onClick:function(){return x()},edge:"start",color:"inherit","aria-label":"menu",children:Object(a.jsx)(v.a,{})})}),Object(a.jsx)(f.a,{container:!0,xs:11,sm:5,md:4,justify:"flex-end",children:Object(a.jsx)(m.a,{style:{paddingTop:8},variant:"h6",children:c.title})})]})}),Object(a.jsx)(ze.a,{hidden:!c.isLoading})]})}))]})},Ye=n(440),Xe=n(437),Je=function(){var e=Object(i.useContext)(je),t=Object(s.a)(e,2),n=t[0],c=t[1];return n.alert&&Object(a.jsx)(Ye.a,{anchorOrigin:{vertical:"top",horizontal:"center"},open:!!n.alert,autoHideDuration:3e3,onClose:function(){return c({type:"HIDE_ALERT"})},children:Object(a.jsx)(Xe.a,{variant:"filled",onClose:function(){return c({type:"HIDE_ALERT"})},severity:n.alert.type,children:n.alert.message})})},Qe=n(433),Ze=function(){var e=Object(i.useContext)(je),t=Object(s.a)(e,2),n=(t[0],t[1]);return Object(i.useEffect)((function(){n({type:"SET_TITLE",payload:"Dashboard"})}),[]),Object(a.jsx)("h3",{children:"Under Construction"})},$e=n(436),et=n(423),tt=n(75),nt=n.n(tt),at=n(419),it=n(73),ct=n.n(it),rt=n(74),ot=n.n(rt),lt=n(119),st=n.n(lt),dt=n(441),ut=n(53),jt=n(418),mt=Object(Be.a)((function(e){return Object(De.a)({cardHeader:{display:"flex",minWidth:444,justifyContent:"flex-start",backgroundColor:e.palette.primary.main,paddingLeft:15,paddingRight:15,paddingTop:10,paddingBottom:10},titleHeader:{color:"white"}})})),bt=function(e){var t=e.title,n=Object(ut.a)(e,["title"]),i=mt();return Object(a.jsxs)(jt.a,Object(u.a)(Object(u.a)({},n),{},{children:[Object(a.jsx)("div",{className:i.cardHeader,children:Object(a.jsx)(m.a,{className:i.titleHeader,component:"h6",variant:"h6",children:t})}),n.children]}))},pt=function(e){var t,n,i=e.employee,c=e.onArchive,r=Object(j.g)();return Object(a.jsx)(a.Fragment,{children:Object(a.jsxs)(bt,{title:"Employee#"+i.id,style:{paddingBottom:5},children:[Object(a.jsx)(at.a,{children:Object(a.jsxs)(f.a,{container:!0,xs:12,justify:"space-between",children:[Object(a.jsxs)(f.a,{style:{paddingLeft:10},container:!0,item:!0,direction:"column",xs:7,justify:"flex-start",children:[Object(a.jsx)(m.a,{component:"h3",variant:"h6",children:"".concat(i.lastname,", ").concat(i.firstname," ").concat(i.middlename)}),Object(a.jsx)(m.a,{variant:"subtitle1",color:"textSecondary",children:null===i||void 0===i||null===(t=i.position)||void 0===t?void 0:t.name}),Object(a.jsx)(m.a,{variant:"subtitle1",color:"textSecondary",children:null===i||void 0===i||null===(n=i.branch)||void 0===n?void 0:n.name}),Object(a.jsx)(f.a,{item:!0,xs:1,children:Object(a.jsx)(dt.a,{style:{marginTop:5},size:"small",label:i.status,variant:"outlined",color:"active"!==i.status?"deactive"===i.status?"secondary":"default":"primary"})})]}),Object(a.jsx)(f.a,{container:!0,item:!0,xs:5,justify:"center",alignItems:"center",children:Object(a.jsx)(Fe,{src:i.image_url,onClick:function(){return r.push("/employees/"+i.id)}})})]})}),Object(a.jsx)(X.a,{style:{marginLeft:20,marginRight:20}}),Object(a.jsxs)(f.a,{container:!0,xs:12,justify:"space-evenly",children:[Object(a.jsx)(p.a,{onClick:function(){return r.push("/employees/"+i.id)},"aria-label":"view",children:Object(a.jsx)(st.a,{})}),Object(a.jsx)(p.a,{onClick:function(){return r.push("/employees/edit/"+i.id)},"aria-label":"edit",children:Object(a.jsx)(ct.a,{})}),Object(a.jsx)(p.a,{onClick:function(){return null===c||void 0===c?void 0:c(i)},"aria-label":"archive",children:Object(a.jsx)(ot.a,{})})]})]})})},Ot=n(356),ht=n(361),vt=n(362),ft=n(420),xt=n(210),gt=n.n(xt),yt=function(e){var t=e.label,n=e.onSearch,c=Object(ut.a)(e,["label","onSearch"]),r=Object(i.useState)(""),o=Object(s.a)(r,2),l=o[0],d=o[1];return Object(a.jsxs)(Ot.a,{fullWidth:!0,variant:"outlined",children:[Object(a.jsx)(ht.a,{htmlFor:"outlined-adornment-password",children:t||"Search..."}),Object(a.jsx)(vt.a,Object(u.a)(Object(u.a)({},c),{},{id:"outlined-adornment-password",name:"search",type:"text",labelWidth:c.labelWidth?c.labelWidth:65,value:l,onKeyPress:function(e){"Enter"===e.key&&(null===n||void 0===n||n.call(null,l))},onChange:function(e){return d(e.target.value)},endAdornment:Object(a.jsx)(ft.a,{position:"end",children:Object(a.jsx)(p.a,{onClick:function(){return null===n||void 0===n?void 0:n.call(null,l)},"aria-label":"toggle password visibility",children:Object(a.jsx)(gt.a,{})})})}))]})},St=n(215),_t=function(e,t){switch(t.type){case"ON_LOAD_BRANCHES":e.branches=t.payload;break;case"ON_LOAD_POSITIONS":e.positions=t.payload;break;case"ON_LOAD_EMPLOYEES":e.employees=t.payload.employees,e.pages=t.payload.pages,e.total=t.payload.total,e.isLoading=!1;break;case"ON_ADD_EMPLOYEE":e.employees=[].concat(Object(St.a)(e.employees),[t.payload]);break;case"ON_GET_EMPLOYEE":e.employee=e.employees.filter((function(e){return e.id===t.payload}))[0];break;case"SET_IS_LOADING":e.isLoading=t.payload;break;case"SET_PAGES":e.pages=t.payload;break;case"SET_TOTAL":e.total=t.payload;break;default:return e}return e},Tt=Object(i.createContext)(null),Et=function(e){var t=Object(i.useReducer)(Object(te.a)(_t),{employees:[],isLoading:!1,employee:{},branches:[],positions:[{id:1,name:"Branch Manager"},{id:2,name:"Agency Manager"},{id:3,name:"Supervisor"},{id:4,name:"Sales Agent"}],pages:0,total:0}),n=Object(s.a)(t,2),c=n[0],r=n[1];return Object(a.jsx)(Tt.Provider,{value:[c,r],children:e.children})},Lt=n(12),At=n.n(Lt),Ct=n(21),It=function(){var e=Object(Ct.a)(At.a.mark((function e(t){return At.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",we.post("/employees",t).then((function(e){return e.data})));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),wt=function(){var e=Object(Ct.a)(At.a.mark((function e(t){return At.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=2;break}return e.abrupt("return",we.get("/employees").then((function(e){return e.data})));case 2:return e.abrupt("return",we.get("/employees?page=".concat((null===t||void 0===t?void 0:t.page)||"","&search=").concat((null===t||void 0===t?void 0:t.search)||"","&category=").concat((null===t||void 0===t?void 0:t.category)||"")).then((function(e){var n=e.data;return(null===t||void 0===t?void 0:t.page)?{employees:n.items.map((function(e){return Object(u.a)(Object(u.a)({},e.profile),e)})),pages:n.pages,total:n.count}:n})));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),kt=function(){var e=Object(Ct.a)(At.a.mark((function e(t){return At.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",we.get("/employees/"+t).then((function(e){var t=e.data;return Object(u.a)(Object(u.a)({},t.profile),{},{id:t.id,branch:t.branch.id,position:t.position.id,status:t.status,clients:t.clients.map((function(e){return Object(u.a)(Object(u.a)({},e.profile),e)}))})})));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Nt=function(e){return we.put("/employees/"+e.id,e).then((function(e){return e.data}))},Bt=n(104),Dt=n(421),Rt=function(){var e=function(){return Object(a.jsxs)(Bt.a,{style:{marginBottom:20},children:[Object(a.jsx)(Dt.a,{animation:"wave",variant:"rect",height:50}),Object(a.jsxs)(f.a,{style:{paddingTop:20,marginBottom:20},container:!0,xs:12,children:[Object(a.jsxs)(f.a,{style:{paddingLeft:20},item:!0,xs:6,children:[Object(a.jsx)(Dt.a,{animation:"wave",variant:"text",width:150}),Object(a.jsx)(Dt.a,{animation:"wave",variant:"text",width:150}),Object(a.jsx)(Dt.a,{animation:"wave",variant:"text",width:150}),Object(a.jsx)(Dt.a,{animation:"wave",variant:"text",width:100}),Object(a.jsx)(Dt.a,{animation:"wave",variant:"text",width:100})]}),Object(a.jsx)(f.a,{item:!0,xs:6,container:!0,justify:"center",children:Object(a.jsx)(Dt.a,{animation:"wave",variant:"circle",width:100,height:100})})]}),Object(a.jsx)(Dt.a,{animation:"wave",variant:"rect",height:70})]})};return Object(a.jsx)(a.Fragment,{children:Object(a.jsxs)(f.a,{container:!0,xs:12,direction:"column",children:[e(),e()]})})},Ft=n(422),Mt=function(e){var t=e.chips,n=e.active,i=e.onChipSelected,c=e.count;return Object(a.jsx)(a.Fragment,{children:Object(a.jsx)(f.a,{style:{marginLeft:0,padding:0,marginBottom:10,paddingBottom:0,paddingTop:10,WebkitOverflowScrolling:"touch",overflowX:"auto",flexWrap:"nowrap"},container:!0,xs:12,justify:"flex-start",direction:"row",spacing:1,alignItems:"center",children:t.map((function(e){return function(e){return Object(a.jsx)(f.a,{item:!0,children:Object(a.jsx)(Ft.a,{invisible:n.value!==e.value,badgeContent:c>=100?"99+":c,color:"primary",children:Object(a.jsx)(dt.a,{onClick:function(){return null===i||void 0===i?void 0:i(e)},color:n.value===e.value?"secondary":"default",variant:n.value===e.value?"default":"outlined",size:"medium",label:e.name})})},e.value)}(e)}))})})},Pt=n(90),Gt=n.n(Pt),Wt=n(91),Ut=n.n(Wt),Ht=Object(Be.a)((function(e){return Object(De.a)({fab:{position:"fixed",bottom:60,right:20}})})),qt=function(){var e=Object(i.useContext)(je),t=Object(s.a)(e,2),n=(t[0],t[1]),c=Object(i.useContext)(Tt),r=Object(s.a)(c,2),o=r[0],l=r[1],d=Gt.a.animateScroll,u=Object(j.g)(),m=Object(j.h)(),b=Object(i.useState)(1),p=Object(s.a)(b,2),O=p[0],h=p[1],v=Object(i.useState)({value:"",name:"All"}),x=Object(s.a)(v,2),g=x[0],y=x[1],S=Ht();Object(i.useEffect)((function(){n({type:"SET_TITLE",payload:"Employee Management"});var e=Ut.a.parse(m.search),t=e.page,a=e.search,i=t?+t:1;return h(i),_({page:i,search:a||""}),function(){n({type:"SET_IS_LOADING",payload:!1})}}),[]);var _=function(e){var t=e.page,a=e.category,i=e.search;n({type:"SET_IS_LOADING",payload:!0}),l({type:"SET_IS_LOADING",payload:!0}),wt({page:t,category:a,search:i}).then((function(e){var t=e.employees,a=e.pages,i=e.total;l({type:"ON_LOAD_EMPLOYEES",payload:{employees:t,pages:a,total:i}}),n({type:"SET_IS_LOADING",payload:!1}),d.scrollToTop({duration:1e3})}))},T=o.isLoading&&!o.employees.length,E=Object(i.useState)({}),L=Object(s.a)(E,2),A=L[0],C=L[1],I=Object(i.useState)(),w=Object(s.a)(I,2),k=w[0],N=w[1],B=function(e){N(e),C({open:!0,text:"Are you sure you want to archive ".concat(e.lastname,", ").concat(e.firstname," ").concat(e.middlename,"?"),description:"Archiving will not permanently delete the employee account in the database."})};return Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)(Te,{onAgree:function(){var e;(e=null===k||void 0===k?void 0:k.id,we.delete("/employees/"+e).then((function(e){return e.data}))).then((function(e){_({page:O}),n({type:"SET_ALERT",payload:{message:"Successfully archived",type:"success"}}),y({value:"",name:"All"})})),C({open:!1})},onDisagree:function(){return C({open:!1})},data:A}),Object(a.jsx)(yt,{label:"Name / Branch",labelWidth:110,onSearch:function(e){y({value:"",name:"All"}),h(1),_({page:1,search:e}),u.push("/employees?search="+e)},style:{marginBottom:5}}),Object(a.jsx)(Mt,{count:o.total,active:g,onChipSelected:function(e){y(e),l({type:"SET_TOTAL",payload:0}),h(1),_({page:1,category:e.value})},chips:[{value:"",name:"All"},{value:"active",name:"Active"},{value:"deactive",name:"Deactive"},{value:"deceased",name:"Deceased"},{value:1,name:"Branch Manager"},{value:2,name:"Agency Manager"},{value:3,name:"Supervisor"},{value:4,name:"Sales Agent"}]}),T&&Object(a.jsx)(Rt,{}),!T&&Object(a.jsxs)(f.a,{container:!0,spacing:2,direction:"column",justify:"flex-start",alignItems:"center",children:[o.employees.map((function(e){return Object(a.jsx)(f.a,{item:!0,xs:12,children:Object(a.jsx)(pt,{onArchive:B,employee:e})},e.id)})),Object(a.jsx)($e.a,{style:{marginTop:15,marginBottom:15},variant:"outlined",color:"primary",count:o.pages,siblingCount:0,page:O,onChange:function(e,t){l({type:"SET_TOTAL",payload:0}),h(t),_({page:t,category:g.value}),u.push("/employees?page="+t)}})]}),Object(a.jsx)(et.a,{onClick:function(){return u.push("/employees/new")},className:S.fab,color:"primary","aria-label":"add",children:Object(a.jsx)(nt.a,{})})]})},Kt=function(e){var t=e.height,n=void 0===t?285:t;return Object(a.jsx)(a.Fragment,{children:Object(a.jsx)(f.a,{container:!0,xs:12,direction:"column",children:Object(a.jsxs)(Bt.a,{style:{marginBottom:20},children:[Object(a.jsx)(Dt.a,{animation:"wave",variant:"rect",height:50}),Object(a.jsxs)(f.a,{style:{paddingTop:20,marginBottom:20},container:!0,xs:12,children:[Object(a.jsxs)(f.a,{style:{paddingLeft:20},item:!0,xs:6,children:[Object(a.jsx)(Dt.a,{animation:"wave",variant:"text",width:150}),Object(a.jsx)(Dt.a,{animation:"wave",variant:"text",width:150}),Object(a.jsx)(Dt.a,{animation:"wave",variant:"text",width:150}),Object(a.jsx)(Dt.a,{animation:"wave",variant:"text",width:100}),Object(a.jsx)(Dt.a,{animation:"wave",variant:"text",width:100})]}),Object(a.jsx)(f.a,{item:!0,xs:6,container:!0,justify:"center",children:Object(a.jsx)(Dt.a,{animation:"wave",variant:"circle",width:100,height:100})})]}),Object(a.jsx)(Dt.a,{animation:"wave",variant:"rect",height:n})]})})})},zt=n(424);var Vt=function(e){return Object(Be.a)((function(t){return Object(De.a)({avatar:{backgroundColor:t.palette.secondary.main},headerSelected:{width:230,backgroundColor:e?t.palette.grey[700]:t.palette.grey[300]},header:{width:230},container:{marginLeft:0,padding:0,paddingBottom:5,WebkitOverflowScrolling:"touch",overflowX:"auto",flexWrap:"nowrap"}})}))},Yt=function(e){var t=e.items,n=e.onSelected,c=e.children,r=Object(ut.a)(e,["items","onSelected","children"]),o=Object(i.useContext)(je),l=Object(s.a)(o,2),d=l[0],j=(l[1],Vt(d.isDark)()),m=Object(i.useState)(),b=Object(s.a)(m,2),p=b[0],O=b[1],h=function(e){var t=e.src,n=e.title,i=e.subtitle;e.item;return Object(a.jsx)(zt.a,{avatar:Object(a.jsx)(Ne.a,{className:j.avatar,src:t,"aria-label":"item"}),title:n,subheader:i})};return Object(a.jsx)(f.a,Object(u.a)(Object(u.a)({},r),{},{container:!0,xs:12,justify:"flex-start",direction:"row",spacing:1,alignItems:"center",className:j.container,children:t.map((function(e,t){return Object(a.jsx)(f.a,{item:!0,xs:12,children:Object(a.jsx)(jt.a,{style:{minHeight:92,display:"flex",alignItems:"center"},className:p===e?j.headerSelected:j.header,onClick:function(){null===n||void 0===n||n(e),O(e)},children:null===c||void 0===c?void 0:c({renderCards:h,item:e})})},t)}))}))},Xt=function(){return Object(a.jsx)(a.Fragment,{children:Object(a.jsx)(f.a,{style:{marginLeft:5,marginTop:15,padding:0,paddingBottom:5,WebkitOverflowScrolling:"touch",overflowX:"auto",flexWrap:"nowrap"},container:!0,xs:12,justify:"flex-start",direction:"row",spacing:1,children:Object(a.jsx)(Bt.a,{style:{paddingLeft:15,width:230},children:Object(a.jsxs)(f.a,{style:{minHeight:92,display:"flex",alignItems:"center"},container:!0,xs:12,children:[Object(a.jsx)(f.a,{item:!0,container:!0,justify:"center",xs:3,children:Object(a.jsx)(Dt.a,{animation:"wave",variant:"circle",width:40,height:40})}),Object(a.jsxs)(f.a,{item:!0,xs:9,container:!0,justify:"flex-start",children:[Object(a.jsx)(Dt.a,{animation:"wave",variant:"text",width:150}),Object(a.jsx)(Dt.a,{animation:"wave",variant:"text",width:100})]})]})})})})},Jt=Object(Be.a)((function(e){return Object(De.a)({avatar:{backgroundColor:e.palette.secondary.main}})})),Qt=function(e){var t,n=Object(j.g)(),c=(Jt(),Object(j.i)()),r=Object(i.useContext)(je),o=Object(s.a)(r,2),l=(o[0],o[1]),d=Object(i.useContext)(Tt),u=Object(s.a)(d,1)[0],b=Object(i.useState)(),p=Object(s.a)(b,2),O=p[0],h=p[1],v=Object(i.useState)(!1),x=Object(s.a)(v,2),g=x[0],y=x[1];Object(i.useEffect)((function(){l({type:"SET_TITLE",payload:"View Employee"}),y(!0),kt(c.id).then((function(e){h(e),y(!1)}))}),[]);var S,_=function(e,t){return Object(a.jsxs)(f.a,{container:!0,alignItems:"center",direction:"column",item:!0,xs:6,children:[Object(a.jsx)(m.a,{component:"h6",variant:"h6",children:e}),Object(a.jsx)(m.a,{variant:"subtitle1",color:"textSecondary",children:t})]})},T=function(e){n.push("/clients/"+e.id)},E=u.branches.filter((function(e){return e.id===(null===O||void 0===O?void 0:O.branch)}))[0],L=u.positions.filter((function(e){return e.id===(null===O||void 0===O?void 0:O.position)}))[0],A=(null===O||void 0===O||null===(t=O.clients)||void 0===t?void 0:t.length)||0;return Object(a.jsx)(a.Fragment,{children:Object(a.jsxs)(f.a,{container:!0,xs:12,children:[g&&Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)(Kt,{}),Object(a.jsxs)(f.a,{container:!0,style:{marginBottom:10},xs:12,children:[Object(a.jsx)(Ft.a,{badgeContent:A>=100?"99+":A,color:"primary",children:Object(a.jsx)(m.a,{variant:"subtitle1",children:"Clients"})}),Object(a.jsx)(Xt,{})]})]}),!g&&O&&Object(a.jsxs)(a.Fragment,{children:[Object(a.jsxs)(bt,{title:"Employee#"+O.id,children:[Object(a.jsx)(at.a,{children:Object(a.jsxs)(f.a,{container:!0,xs:12,justify:"space-between",children:[Object(a.jsxs)(f.a,{style:{paddingLeft:10},container:!0,direction:"column",item:!0,xs:7,justify:"flex-start",children:[Object(a.jsx)(m.a,{component:"h6",variant:"h6",children:"".concat(O.lastname,", ").concat(O.firstname," ").concat(O.middlename)}),Object(a.jsx)(m.a,{variant:"subtitle1",color:"textSecondary",children:null===L||void 0===L?void 0:L.name}),Object(a.jsx)(m.a,{variant:"subtitle1",color:"textSecondary",children:null===E||void 0===E?void 0:E.name}),Object(a.jsx)(f.a,{item:!0,xs:1,children:Object(a.jsx)(dt.a,{style:{marginTop:5},size:"small",label:O.status,variant:"default",color:"active"!==O.status?"secondary":"primary"})})]}),Object(a.jsx)(f.a,{container:!0,item:!0,xs:5,justify:"center",alignItems:"center",children:Object(a.jsx)(Fe,{src:O.image_url})})]})}),Object(a.jsx)(X.a,{style:{marginLeft:20,marginRight:20}}),Object(a.jsx)(at.a,{children:Object(a.jsxs)(f.a,{spacing:1,container:!0,xs:12,style:{paddingLeft:10},children:[_("Gender",O.gender),_("Civil Status",O.civil),_("Contact",O.contact),_("Age",O.birthdate?de(O.birthdate):"N/A"),Object(a.jsxs)(f.a,{container:!0,alignItems:"center",direction:"column",item:!0,xs:12,children:[Object(a.jsx)(m.a,{component:"h6",variant:"h6",children:"Address"}),Object(a.jsx)(m.a,{variant:"subtitle1",color:"textSecondary",children:O.address})]})]})})]}),(S=O.clients,Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)(f.a,{container:!0,style:{marginTop:20,marginBottom:10},xs:12,justify:"space-between",children:!!A&&Object(a.jsx)(Ft.a,{badgeContent:A>=100?"99+":A,color:"primary",children:Object(a.jsx)(m.a,{variant:"subtitle1",children:"Clients"})})}),Object(a.jsx)(Yt,{onSelected:T,items:S,children:function(e){var t=e.renderCards,n=e.item;return Object(a.jsx)(a.Fragment,{children:t({item:n,title:"".concat(n.lastname,", ").concat(n.firstname),subtitle:n.code,src:n.image_url})})}})]})),Object(a.jsxs)(f.a,{style:{paddingLeft:18,paddingTop:10,paddingBottom:5},container:!0,xs:12,justify:"center",spacing:2,children:[Object(a.jsx)(f.a,{item:!0,xs:6,children:Object(a.jsx)(fe.a,{onClick:function(){return n.goBack()},style:{paddingTop:15,paddingBottom:15},fullWidth:!0,variant:"contained",color:"default",children:"BACK"})}),Object(a.jsx)(f.a,{item:!0,xs:6,children:Object(a.jsx)(fe.a,{onClick:function(){return n.push("/employees/edit/"+O.id)},style:{paddingTop:15,paddingBottom:15},fullWidth:!0,variant:"contained",color:"primary",children:"EDIT"})})]})]})]})})},Zt=n(52),$t=n.n(Zt),en={firstname:ce("Firstname").min(1).max(50),middlename:ce("Middlename").min(1).max(50),lastname:ce("Lastname").min(1).max(50),position:re("Position"),status:re("Status"),civil:re("Civil Status"),gender:re("Gender"),branch:re("Branch")},tn=n(94),nn=n(92),an=n(426),cn=n(360),rn=n(428),on=n(438),ln=n(211),sn=n.n(ln),dn=n(359),un=n(425),jn=n(213),mn=n.n(jn),bn=n(212),pn=n.n(bn),On=n(41),hn=n(435),vn=function(e){return Object(i.memo)((function(t){var n;return console.log("hit memo"),Object(a.jsx)(f.a,{item:!0,xs:12,children:Object(a.jsx)(fe.a,{disabled:e,style:{paddingTop:15,paddingBottom:15},fullWidth:!0,type:"submit",variant:"contained",color:"primary",startIcon:e&&Object(a.jsx)(un.a,{color:"primary",size:24,style:{position:"absolute",top:"50%",left:"50%",marginTop:-12,marginLeft:-12}}),children:null!==(n=t.text)&&void 0!==n?n:"SUBMIT"})})}))};var fn=function(e){var t,n,r=Object(i.useContext)(je),o=Object(s.a)(r,2),l=(o[0],o[1]),d=Object(s.a)(e.state,2),j=d[0],m=d[1],b=c.a.useState(!1),O=Object(s.a)(b,2),h=O[0],v=O[1],x=c.a.useState(null!==(t=e.radioButtonDefaultValue)&&void 0!==t?t:""),g=Object(s.a)(x,2),y=g[0],S=g[1],_=c.a.useState(null),T=Object(s.a)(_,2),E=T[0],L=T[1],A=function(e){S(e.target.value)};return Object(a.jsx)("form",{onSubmit:function(t){t.preventDefault();var n,a=Object(u.a)({},j),i=Object(nn.a)(new FormData(t.target).entries());try{for(i.s();!(n=i.n()).done;){var c=Object(s.a)(n.value,2),r=c[0],o=c[1];a[r]=o}}catch(m){i.e(m)}finally{i.f()}var d=function(t){var n=ae.a.object(e.validator).options({abortEarly:!1,allowUnknown:!0}).validate(t).error;if(!n)return null;console.log(n);var a={};return n.details.forEach((function(e){return a[e.path[0]]=e.message})),a}(a);return v(!0),d?(l({type:"SET_ALERT",payload:{message:"Fill out all the fields.",type:"error"}}),L(d),void v(!1)):e.onSubmit(a).then((function(){L({}),v(!1)})).catch((function(e){v(!1)}))},children:Object(a.jsx)(f.a,{style:{pointerEvents:h?"none":"all"},container:!0,spacing:2,direction:"column",children:null===(n=e.children)||void 0===n?void 0:n.call(e,{myInput:function(e){var t=E&&E[e.name];return Object(a.jsx)(f.a,{item:!0,xs:12,children:Object(a.jsx)(an.a,{defaultValue:e.value,multiline:e.isMultiline,fullWidth:!0,name:e.name,variant:"outlined",label:e.label,type:e.type,error:!!t,helperText:t})},e.name)},myControlledInput:function(e){var t=E&&E[e.name];return Object(a.jsx)(f.a,{item:!0,xs:12,children:Object(a.jsx)(an.a,{value:e.value,multiline:e.isMultiline,fullWidth:!0,name:e.name,variant:"outlined",label:e.label,type:e.type,error:!!t,helperText:t,onChange:function(t){return e.onChange?e.onChange(t):m((function(n){return Object(u.a)(Object(u.a)({},n),{},Object(tn.a)({},e.name,t.target.value))}))}})},e.name)},myInputPassword:function(e){var t=E&&E[e.name];return Object(a.jsx)(f.a,{item:!0,xs:12,children:Object(a.jsxs)(Ot.a,{fullWidth:!0,variant:"outlined",error:!!t,children:[Object(a.jsx)(ht.a,{htmlFor:e.label,children:e.label}),Object(a.jsx)(vt.a,{defaultValue:e.value,id:e.name,name:e.name,type:e.type,labelWidth:70,endAdornment:Object(a.jsx)(ft.a,{position:"end",children:Object(a.jsx)(p.a,{"aria-label":"toggle password visibility",onClick:function(){var t;return null===(t=e.onTogglePassword)||void 0===t?void 0:t.call(null,(function(e){return!e}))},children:"password"!==e.type?Object(a.jsx)(pn.a,{}):Object(a.jsx)(mn.a,{})})})}),Object(a.jsx)(dn.a,{children:t})]})},e.name)},mySelect:function(e){var t,n,i,c,r,o=E&&E[null!==(t=e.name)&&void 0!==t?t:e.value];return Object(a.jsx)(f.a,{item:!0,xs:12,children:Object(a.jsxs)(Ot.a,{fullWidth:!0,variant:"outlined",error:!!o,children:[Object(a.jsx)(ht.a,{id:e.label,children:e.label}),Object(a.jsxs)(cn.a,{labelId:e.label,id:null!==(i=e.name)&&void 0!==i?i:e.value,name:null!==(c=e.name)&&void 0!==c?c:e.value,value:e.value||"",onChange:e.onChange?e.onChange:function(t){var n=t.target.value;if(o&&"clear"!==n){var a=Object(u.a)({},E);delete a[e.name],L(a)}m(Object(u.a)(Object(u.a)({},j),{},Object(tn.a)({},e.name,"clear"!==n?n:"")))},labelWidth:null!==(r=e.labelWidth)&&void 0!==r?r:60,children:[e.options.map((function(t){return Object(a.jsx)(rn.a,{value:t.value,children:t.name?e.subLabel?t.name+"-"+e.subLabel:t.name:t.value})})),Object(a.jsx)(X.a,{style:{marginLeft:15,marginRight:15}}),Object(a.jsx)(rn.a,{value:"clear",children:"Clear"})]}),Object(a.jsx)(dn.a,{children:o})]})},null!==(n=e.name)&&void 0!==n?n:e.value)},myDateTimePicker:function(e){var t,n=E&&E[e.name];return Object(a.jsx)(f.a,{item:!0,xs:12,children:Object(a.jsx)(On.a,{utils:sn.a,children:Object(a.jsx)(hn.a,{fullWidth:!0,inputVariant:"outlined",disableToolbar:!0,variant:"dialog",format:"MM/dd/yyyy",margin:"none",error:!!n,helperText:n,label:e.label,value:null!==(t=e.value)&&void 0!==t?t:null,onChange:function(t){m(Object(u.a)(Object(u.a)({},j),{},Object(tn.a)({},e.name,null===t||void 0===t?void 0:t.toLocaleDateString())))},KeyboardButtonProps:{"aria-label":"change date"}})})},e.name)},myButton:function(e){return Object(a.jsx)(f.a,{item:!0,xs:12,children:Object(a.jsx)(fe.a,{disabled:h,fullWidth:!0,type:"submit",variant:"contained",color:"primary",startIcon:h&&Object(a.jsx)(un.a,{color:"primary",size:24,style:{position:"absolute",top:"50%",left:"50%",marginTop:-12,marginLeft:-12}}),children:null!==e&&void 0!==e?e:"SUBMIT"})})},myRadio:function(e){return Object(a.jsx)(on.a,{checked:y===e.value,onChange:A,value:e.value,name:e.name})},MyButtonMemo:vn(h)})})})},xn=function(){var e=Object(Ct.a)(At.a.mark((function e(t,n){var a;return At.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null===t||void 0===t?void 0:t.size){e.next=2;break}return e.abrupt("return",n(""));case 2:return(a=new FormData).append("file",t),a.append("upload_preset","wlttlc0c"),a.append("cloud_name","kitchanismo"),e.abrupt("return",we.axios.post("https://api.cloudinary.com/v1_1/kitchanismo/image/upload",a).then((function(e){var t=e.data;return n(t.url)})).catch((function(){return n("")})));case 7:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),gn=function(e){return we.get("/branches?search=".concat(e||"")).then((function(e){return e.data}))},yn=function(e){return we.post("/branches",e).then((function(e){return e.data}))},Sn=function(e){return we.put("/branches/"+e.id,e).then((function(e){return e.data}))},_n=Object(i.createContext)(null),Tn=function(e,t){switch(t.type){case"ON_LOAD_BRANCHES":e.branches=t.payload,e.isLoading=!1;break;case"SET_IS_LOADING":e.isLoading=t.payload;break;default:return e}return e},En=function(e){var t=Object(i.useReducer)(Object(te.a)(Tn),{branches:[],isLoading:!1}),n=Object(s.a)(t,2),c=n[0],r=n[1];return Object(a.jsx)(_n.Provider,{value:[c,r],children:e.children})},Ln=function(){var e=Object(i.useContext)(je),t=Object(s.a)(e,2),n=t[0].currentUser,r=t[1],o=Object(i.useContext)(Tt),l=Object(s.a)(o,2),d=l[0],b=(l[1],Object(i.useContext)(_n)),O=Object(s.a)(b,2),h=O[0],v=O[1],x=c.a.useState(null),g=Object(s.a)(x,2),y=g[0],S=g[1];Object(i.useEffect)((function(){r({type:"SET_TITLE",payload:"Employee Registration"}),gn().then((function(e){return v({type:"ON_LOAD_BRANCHES",payload:e})}))}),[]);var _=Object(j.g)(),T=c.a.useState({status:"deactive"}),E=Object(s.a)(T,2),L=E[0],A=E[1],C=function(){var e=Object(Ct.a)(At.a.mark((function e(t){return At.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r({type:"SET_IS_LOADING",payload:!0}),e.abrupt("return",xn(null===t||void 0===t?void 0:t.image,(function(e){return t.image_url=e,delete t.image,It(t).then((function(){r({type:"SET_ALERT",payload:{message:"Successfully added",type:"success"}}),r({type:"SET_IS_LOADING",payload:!1})}))})));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),I={state:[L,A],onSubmit:C,validator:en};return Object(a.jsx)(fn,Object(u.a)(Object(u.a)({},I),{},{children:function(e){var t=e.myInput,i=e.mySelect,c=e.myDateTimePicker,r=e.myButton;return Object(a.jsxs)(a.Fragment,{children:[t({label:"Firstname",value:L.firstname,name:"firstname"}),t({label:"Middlename",value:L.middlename,name:"middlename"}),t({label:"Lastname",value:L.lastname,name:"lastname"}),t({label:"Contact Number",value:L.contact,name:"contact"}),t({label:"Address",value:L.address,name:"address",isMultiline:!0}),c({label:"Birthdate",value:L.birthdate,name:"birthdate"}),i({label:"Gender",value:L.gender,name:"gender",options:[{value:"Male"},{value:"Female"},{value:"Other"}]}),i({label:"Civil Status",value:L.civil,name:"civil",labelWidth:80,options:[{value:"Single"},{value:"Married"},{value:"Widowed"}]}),i({label:"Position",value:L.position,name:"position",labelWidth:55,options:d.positions.map((function(e){return{value:e.id,name:e.name}}))}),i({label:"Branch",value:L.branch,name:"branch",labelWidth:55,options:h.branches.map((function(e){return{value:e.id,name:e.name}}))}),Object(a.jsxs)(f.a,{container:!0,style:{paddingLeft:15,paddingRight:15,marginBottom:10},alignItems:"center",justify:"space-between",xs:12,children:[Object(a.jsx)(m.a,{variant:"subtitle1",children:(null===y||void 0===y?void 0:y.name)||"Select Photo"}),Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)("input",{accept:"image/*",style:{display:"none"},name:"image",id:"icon-button-file",type:"file",onChange:function(e){S(e.target.files[0])}}),Object(a.jsx)("label",{htmlFor:"icon-button-file",children:Object(a.jsx)(p.a,{color:"primary","aria-label":"upload picture",component:"span",children:Object(a.jsx)($t.a,{})})})]})]}),Object(a.jsxs)(f.a,{style:{paddingLeft:18,paddingTop:10,paddingBottom:5},container:!0,xs:12,justify:"center",spacing:2,children:[Object(a.jsx)(f.a,{item:!0,xs:6,children:"admin"===(null===n||void 0===n?void 0:n.role)&&Object(a.jsx)(fe.a,{onClick:function(){return _.goBack()},fullWidth:!0,variant:"contained",color:"default",children:"BACK"})}),Object(a.jsx)(f.a,{item:!0,xs:6,children:r()})]})]})}}))},An=function(){var e=Object(i.useContext)(je),t=Object(s.a)(e,2),n=(t[0],t[1]),c=Object(i.useContext)(Tt),r=Object(s.a)(c,2),o=r[0],l=(r[1],Object(i.useContext)(_n)),d=Object(s.a)(l,2),b=d[0],O=d[1],h=Object(j.g)(),v=Object(j.i)(),x=Object(i.useState)(!1),g=Object(s.a)(x,2),y=(g[0],g[1]),S=Object(i.useState)(null),_=Object(s.a)(S,2),T=_[0],E=_[1],L=Object(i.useState)({address:"",firstname:"",middlename:"",lastname:"",contact:""}),A=Object(s.a)(L,2),C=A[0],I=A[1];Object(i.useEffect)((function(){n({type:"SET_TITLE",payload:"Edit Employee"}),y(!0),kt(v.id).then((function(e){I(e),y(!1)})),gn().then((function(e){return O({type:"ON_LOAD_BRANCHES",payload:e})}))}),[]);var w=function(){var e=Object(Ct.a)(At.a.mark((function e(t){return At.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",xn(null===t||void 0===t?void 0:t.image,(function(e){return delete t.image,Nt(Object(u.a)(Object(u.a)({},t),{},{image_url:e||t.image_url})).then((function(){n({type:"SET_ALERT",payload:{message:"Successfully saved",type:"success"}}),n({type:"SET_IS_LOADING",payload:!1})})).catch((function(e){400===e.response.status&&n({type:"SET_ALERT",payload:{message:e.response.data.error,type:"error"}}),n({type:"SET_IS_LOADING",payload:!1})}))})));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),k={state:[C,I],onSubmit:w,validator:en};return Object(a.jsx)(fn,Object(u.a)(Object(u.a)({},k),{},{children:function(e){var t=e.mySelect,n=e.myDateTimePicker,i=e.myButton,c=e.myControlledInput;return Object(a.jsxs)(a.Fragment,{children:[c({label:"Firstname",value:C.firstname,name:"firstname"}),c({label:"Middlename",value:C.middlename,name:"middlename"}),c({label:"Lastname",value:C.lastname,name:"lastname"}),c({label:"Contact Number",value:C.contact,name:"contact"}),c({label:"Address",value:C.address,name:"address",isMultiline:!0}),n({label:"Birthdate",value:C.birthdate,name:"birthdate"}),t({label:"Gender",value:C.gender,name:"gender",options:[{value:"Male"},{value:"Female"},{value:"Other"}]}),t({label:"Civil Status",value:C.civil,name:"civil",labelWidth:80,options:[{value:"Single"},{value:"Married"},{value:"Widowed"}]}),t({label:"Position",value:C.position,name:"position",labelWidth:55,options:o.positions.map((function(e){return{value:e.id,name:e.name}}))}),t({label:"Branch",value:C.branch+"",name:"branch",labelWidth:55,options:b.branches.map((function(e){return{value:e.id,name:e.name}}))}),t({label:"Status",value:C.status,name:"status",labelWidth:40,options:[{value:"active",name:"Active"},{value:"deactive",name:"Deactive"},{value:"deceased",name:"Deceased"}]}),Object(a.jsxs)(f.a,{container:!0,style:{paddingLeft:15,paddingRight:15,marginBottom:10},alignItems:"center",justify:"space-between",xs:12,children:[Object(a.jsx)(m.a,{variant:"subtitle1",children:(null===T||void 0===T?void 0:T.name)||"Select Photo"}),Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)("input",{accept:"image/*",style:{display:"none"},name:"image",id:"icon-button-file",type:"file",onChange:function(e){E(e.target.files[0])}}),Object(a.jsx)("label",{htmlFor:"icon-button-file",children:Object(a.jsx)(p.a,{color:"primary","aria-label":"upload picture",component:"span",children:Object(a.jsx)($t.a,{})})})]})]}),Object(a.jsxs)(f.a,{style:{paddingLeft:18,paddingTop:10,paddingBottom:5},container:!0,xs:12,justify:"center",spacing:2,children:[Object(a.jsx)(f.a,{item:!0,xs:6,children:Object(a.jsx)(fe.a,{onClick:function(){return h.goBack()},fullWidth:!0,variant:"contained",color:"default",children:"BACK"})}),Object(a.jsx)(f.a,{item:!0,xs:6,children:i()})]})]})}}))},Cn=[{id:1,price:23280,name:"Plan 1"},{id:2,price:32280,name:"Plan 2"},{id:3,price:41280,name:"Plan 3"},{id:4,price:50280,name:"Plan 4"},{id:5,price:65280,name:"Plan 5"},{id:6,price:83280,name:"Plan 6"},{id:7,price:95280,name:"Plan 7"},{id:8,price:173280,name:"Plan 8"}],In=function(){var e=Object(Ct.a)(At.a.mark((function e(t){return At.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",we.get("/clients/"+t).then((function(e){var t=e.data;return Object(u.a)(Object(u.a)({},t.profile),t)})));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),wn=function(e){return we.post("/clients",e).then((function(e){return e.data}))},kn=function(e){return we.put("/clients/"+e.id,e).then((function(e){return e.data}))},Nn=function(){var e=Object(Ct.a)(At.a.mark((function e(t){return At.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",we.get("/clients?page=".concat(t.page||"","&search=").concat(t.search||"","&category=").concat(t.category||"")).then((function(e){var t=e.data;return{clients:t.items.map((function(e){return Object(u.a)(Object(u.a)({},e.profile),e)})),pages:t.pages,total:t.count}})));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Bn=function(){var e=Object(Ct.a)(At.a.mark((function e(t){return At.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",we.get("/clients/lapse?search="+t).then((function(e){return e.data.map((function(e){return Object(u.a)(Object(u.a)({},e.profile),e)}))})));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Dn=function(e){var t,n,a,i,c;if("Fullpayment"===e.payment_mode)return null===(c=e.plan)||void 0===c?void 0:c.price;switch(e.payment_period){case"Monthly":return(null===(t=e.plan)||void 0===t?void 0:t.price)/(12*e.years_to_pay);case"Quarterly":return(null===(n=e.plan)||void 0===n?void 0:n.price)/(4*e.years_to_pay);case"Semi-Annually":return(null===(a=e.plan)||void 0===a?void 0:a.price)/(2*e.years_to_pay);case"Annually":return(null===(i=e.plan)||void 0===i?void 0:i.price)/e.years_to_pay;default:return 0}},Rn=function(e){var t,n=null===e||void 0===e||null===(t=e.plan)||void 0===t?void 0:t.price,a=null===e||void 0===e?void 0:e.balance;return Math.ceil(100*(n-a)/n)<=20},Fn=function(e){var t=Dn(e),n=function(e){var t=0;switch(e.payment_period){case"Monthly":t=12;break;case"Quarterly":t=4;break;case"Semi-Annually":t=2;break;case"Annually":t=1;break;default:t=12}return t*e.years_to_pay}(e);return Math.ceil(n-e.balance/t)+"/"+n},Mn=function(e){var t,n,i=e.client,c=e.onArchieve,r=Object(j.g)();return Object(a.jsxs)(bt,{title:"Code#".concat(i.code),style:{paddingBottom:5},children:[Object(a.jsx)(at.a,{children:Object(a.jsxs)(f.a,{container:!0,xs:12,justify:"space-between",children:[Object(a.jsxs)(f.a,{style:{paddingLeft:10},container:!0,item:!0,direction:"column",xs:7,justify:"flex-start",children:[Object(a.jsx)(m.a,{component:"h6",variant:"h6",children:"".concat(i.lastname,", ").concat(i.firstname," ").concat(i.middlename)}),Object(a.jsx)(m.a,{variant:"subtitle1",color:"textSecondary",children:null===i||void 0===i||null===(t=i.branch)||void 0===t?void 0:t.name}),Object(a.jsx)(m.a,{variant:"subtitle1",color:"textSecondary",children:(null===(n=i.plan)||void 0===n?void 0:n.name)+" - "+i.payment_mode}),"Installment"===i.payment_mode&&Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)(m.a,{variant:"caption",color:"textSecondary",children:"Lapse on "+new Date(i.next_payment).toDateString()}),Object(a.jsxs)(f.a,{item:!0,xs:1,children:[Object(a.jsx)(dt.a,{style:{marginTop:5},size:"small",label:Rn(i)?"on commission":"no commission",variant:"outlined",color:Rn(i)?"secondary":"default"}),Object(a.jsx)(dt.a,{style:{marginTop:10},size:"small",label:Fn(i)+" paid",color:"default",variant:"outlined"})]})]})]}),Object(a.jsx)(f.a,{container:!0,item:!0,xs:5,justify:"center",alignItems:"center",children:Object(a.jsx)(Fe,{src:null===i||void 0===i?void 0:i.image_url,onClick:function(){return r.push("/clients/"+i.id)}})})]})}),Object(a.jsx)(X.a,{style:{marginLeft:20,marginRight:20}}),Object(a.jsxs)(f.a,{container:!0,xs:12,justify:"space-evenly",children:[Object(a.jsx)(p.a,{onClick:function(){return r.push("/clients/"+i.id)},"aria-label":"view",children:Object(a.jsx)(st.a,{})}),Object(a.jsx)(p.a,{onClick:function(){return r.push("/clients/edit/"+i.id)},"aria-label":"edit",children:Object(a.jsx)(ct.a,{})}),Object(a.jsx)(p.a,{onClick:function(){return null===c||void 0===c?void 0:c(i)},"aria-label":"archive",children:Object(a.jsx)(ot.a,{})})]})]})},Pn=Object(i.createContext)(null),Gn=function(e,t){switch(t.type){case"ON_LOAD_PLANS":e.plans=t.payload;break;case"ON_RELOAD_PLANS":e.onReloadPlans=!e.onReloadPlans;break;case"ON_LOAD_CLIENTS":e.clients=t.payload.clients,e.total=t.payload.total,e.pages=t.payload.pages,e.isLoading=!1;break;case"ON_LOAD_CLIENTS_INSTALLMENT":e.clients=t.payload.filter((function(e){return"Installment"===e.payment_mode})),e.isLoading=!1;break;case"SET_IS_LOADING":e.isLoading=t.payload;break;case"TOGGLE_LOADING":e.isLoading=!e.isLoading;break;case"SET_PAGES":e.pages=t.payload;break;case"SET_TOTAL":e.total=t.payload;break;default:return e}return e},Wn=function(e){var t=Object(i.useReducer)(Object(te.a)(Gn),{clients:[],plans:Cn,isLoading:!1,onReloadPlans:!1,pages:0,total:0}),n=Object(s.a)(t,2),c=n[0],r=n[1];return Object(a.jsx)(Pn.Provider,{value:[c,r],children:e.children})},Un=Object(Be.a)((function(e){return Object(De.a)({fab:{position:"fixed",bottom:60,right:20}})})),Hn=function(){var e=Object(i.useContext)(Pn),t=Object(s.a)(e,2),n=t[0],c=t[1],r=Object(i.useContext)(je),o=Object(s.a)(r,2),l=(o[0],o[1]),d=Un(),u=Object(j.h)(),m=Gt.a.animateScroll,b=Object(j.g)(),p=Object(i.useState)(1),O=Object(s.a)(p,2),h=O[0],v=O[1],x=Object(i.useState)({value:"",name:"All"}),g=Object(s.a)(x,2),y=g[0],S=g[1];Object(i.useEffect)((function(){l({type:"SET_TITLE",payload:"Client Management"});var e=Ut.a.parse(u.search),t=e.page,n=e.search,a=t?+t:1;return v(a),_({page:a,search:n||""}),function(){l({type:"SET_IS_LOADING",payload:!1})}}),[]);var _=function(e){var t=e.page,n=e.category,a=e.search;c({type:"SET_IS_LOADING",payload:!0}),l({type:"SET_IS_LOADING",payload:!0}),Nn({page:t,category:n,search:a}).then((function(e){var t=e.clients,n=e.pages,a=e.total;c({type:"ON_LOAD_CLIENTS",payload:{clients:t,pages:n,total:a}}),l({type:"SET_IS_LOADING",payload:!1}),m.scrollToTop({duration:1e3})}))},T=n.isLoading&&!n.clients.length,E=Object(i.useState)({}),L=Object(s.a)(E,2),A=L[0],C=L[1],I=Object(i.useState)(),w=Object(s.a)(I,2),k=w[0],N=w[1],B=function(e){N(e),C({open:!0,text:"Are you sure you want to archive ".concat(e.lastname,", ").concat(e.firstname," ").concat(e.middlename,"?"),description:"Archiving will not permanently delete the client account in the database."})};return Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)(Te,{onAgree:function(){var e;(e=null===k||void 0===k?void 0:k.id,we.delete("/clients/"+e).then((function(e){return e.data}))).then((function(e){_({page:h}),l({type:"SET_ALERT",payload:{message:"Successfully archived",type:"success"}}),S({value:"",name:"All"})})),C({open:!1})},onDisagree:function(){return C({open:!1})},data:A}),Object(a.jsx)(yt,{labelWidth:160,label:"Name / Code / Branch",onSearch:function(e){S({value:"",name:"All"}),v(1),_({page:1,search:e}),b.push("/clients?search="+e)},style:{marginBottom:5}}),Object(a.jsx)(Mt,{count:n.total,onChipSelected:function(e){c({type:"SET_TOTAL",payload:0}),S(e),v(1),_({page:1,category:e.value}),e.value&&b.push("/clients")},active:y,chips:[{value:"",name:"All"},{value:"lapse",name:"Lapsed"},{value:"near",name:"Near"},{value:"on",name:"On Commission"},{value:"no",name:"No Commission"},{value:"installment",name:"Installment"},{value:"fullpayment",name:"Fullpayment"}]}),T&&Object(a.jsx)(Rt,{}),!T&&Object(a.jsxs)(f.a,{container:!0,spacing:2,direction:"column",justify:"flex-start",alignItems:"center",children:[n.clients.map((function(e){return Object(a.jsx)(f.a,{item:!0,xs:12,children:Object(a.jsx)(Mn,{onArchieve:B,client:e},e.id)},e.id)})),Object(a.jsx)($e.a,{style:{marginTop:15,marginBottom:15},variant:"outlined",color:"primary",count:n.pages,siblingCount:0,page:h,onChange:function(e,t){c({type:"SET_TOTAL",payload:0}),v(t),_({page:t,category:y.value}),b.push("/clients?page="+t)}})]}),Object(a.jsx)(et.a,{onClick:function(){return b.push("/clients/new")},className:d.fab,color:"primary","aria-label":"add",children:Object(a.jsx)(nt.a,{})})]})},qn=function(){var e,t,n=Object(j.g)(),c=Object(j.i)().id,r=Object(i.useContext)(je),o=Object(s.a)(r,2),l=(o[0],o[1]),d=Object(i.useState)(),u=Object(s.a)(d,2),b=u[0],p=u[1],O=Object(i.useState)(!1),h=Object(s.a)(O,2),v=h[0],x=h[1];Object(i.useEffect)((function(){x(!0),l({type:"SET_TITLE",payload:"View Client"}),In(+c).then((function(e){p(e),x(!1)}))}),[]);var g=function(e,t){return Object(a.jsxs)(f.a,{container:!0,alignItems:"center",direction:"column",item:!0,xs:6,children:[Object(a.jsx)(m.a,{component:"h6",variant:"h6",children:e}),Object(a.jsx)(m.a,{variant:"subtitle1",color:"textSecondary",children:t})]})};return Object(a.jsxs)(f.a,{container:!0,xs:12,children:[v&&Object(a.jsx)(Kt,{}),b&&!v&&Object(a.jsxs)(a.Fragment,{children:[Object(a.jsxs)(bt,{title:"Code#"+b.code,children:[Object(a.jsx)(at.a,{children:Object(a.jsxs)(f.a,{container:!0,xs:12,justify:"space-between",children:[Object(a.jsxs)(f.a,{style:{paddingLeft:10},container:!0,direction:"column",item:!0,xs:7,justify:"flex-start",children:[Object(a.jsx)(m.a,{component:"h6",variant:"h6",children:"".concat(b.lastname,", ").concat(b.firstname," ").concat(b.middlename)}),Object(a.jsx)(m.a,{variant:"subtitle1",color:"textSecondary",children:(null===(e=b.plan)||void 0===e?void 0:e.name)+" - "+b.payment_mode}),"Installment"===b.payment_mode&&Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)(m.a,{variant:"caption",color:"textSecondary",children:"Lapse on "+new Date(b.next_payment).toDateString()}),Object(a.jsx)(f.a,{item:!0,xs:1,children:Object(a.jsx)(dt.a,{style:{marginTop:5},size:"small",label:Fn(b)+" Paid",color:"default",variant:"outlined"})})]})]}),Object(a.jsx)(f.a,{container:!0,item:!0,xs:5,justify:"center",alignItems:"center",children:Object(a.jsx)(Fe,{src:b.image_url})})]})}),Object(a.jsx)(X.a,{style:{marginLeft:20,marginRight:20}}),Object(a.jsx)(at.a,{children:Object(a.jsxs)(f.a,{spacing:1,container:!0,xs:12,style:{paddingLeft:10},children:[g("Period ",b.payment_period),g("Balance",ue(b.balance)),g("Branch",null===b||void 0===b||null===(t=b.branch)||void 0===t?void 0:t.name),g("Insured",new Date(b.created_at).toLocaleDateString())]})}),Object(a.jsx)(X.a,{style:{marginLeft:20,marginRight:20}}),Object(a.jsx)(at.a,{children:Object(a.jsxs)(f.a,{spacing:1,container:!0,xs:12,style:{paddingLeft:10},children:[g("Gender",b.gender),g("Civil Status",b.civil),g("Contact",b.contact),g("Age",b.birthdate?de(b.birthdate):"N/A"),Object(a.jsxs)(f.a,{container:!0,alignItems:"center",direction:"column",item:!0,xs:12,children:[Object(a.jsx)(m.a,{component:"h6",variant:"h6",children:"Address"}),Object(a.jsx)(m.a,{variant:"subtitle1",color:"textSecondary",children:b.address})]})]})})]}),Object(a.jsxs)(f.a,{style:{paddingLeft:18,paddingTop:10,paddingBottom:5},container:!0,xs:12,justify:"center",spacing:2,children:[Object(a.jsx)(f.a,{item:!0,xs:6,children:Object(a.jsx)(fe.a,{onClick:function(){return n.goBack()},style:{paddingTop:15,paddingBottom:15},fullWidth:!0,variant:"contained",color:"default",children:"BACK"})}),Object(a.jsx)(f.a,{item:!0,xs:6,children:Object(a.jsx)(fe.a,{onClick:function(){return n.push("/clients/edit/"+b.id)},style:{paddingTop:15,paddingBottom:15},fullWidth:!0,variant:"contained",color:"primary",children:"EDIT"})})]})]})]})},Kn={firstname:ce("Firstname").min(1).max(50),middlename:ce("Middlename").min(1).max(50),lastname:ce("Lastname").min(1).max(50),civil:re("Civil Status"),gender:re("Gender")},zn=function(e){var t=Object(s.a)(e.state,2),n=t[0],r=t[1],o=e.onNext,l=Object(i.useContext)(je),d=Object(s.a)(l,2),b=d[0].currentUser,O=(d[1],Object(j.g)()),h=c.a.useState(null),v=Object(s.a)(h,2),x=v[0],g=v[1],y={state:[n,r],onSubmit:o,validator:Kn};return Object(a.jsx)(fn,Object(u.a)(Object(u.a)({},y),{},{children:function(e){var t=e.myInput,i=e.mySelect,c=e.myDateTimePicker,r=e.myButton;return Object(a.jsxs)(a.Fragment,{children:[t({label:"Firstname",value:n.firstname,name:"firstname"}),t({label:"Middlename",value:n.middlename,name:"middlename"}),t({label:"Lastname",value:n.lastname,name:"lastname"}),t({label:"Contact Number",value:n.contact,name:"contact"}),t({label:"Address",value:n.address,name:"address",isMultiline:!0}),c({label:"Birthdate",value:n.birthdate,name:"birthdate"}),i({label:"Gender",value:n.gender,name:"gender",options:[{value:"Male"},{value:"Female"},{value:"Other"}]}),i({label:"Civil Status",value:n.civil,name:"civil",labelWidth:80,options:[{value:"Single"},{value:"Married"},{value:"Widowed"}]}),Object(a.jsxs)(f.a,{container:!0,style:{paddingLeft:15,paddingRight:15,marginBottom:10},alignItems:"center",justify:"space-between",xs:12,children:[Object(a.jsx)(m.a,{variant:"subtitle1",children:(null===x||void 0===x?void 0:x.name)||"Select Photo"}),Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)("input",{accept:"image/*",style:{display:"none"},name:"image",id:"icon-button-file",type:"file",onChange:function(e){g(e.target.files[0])}}),Object(a.jsx)("label",{htmlFor:"icon-button-file",children:Object(a.jsx)(p.a,{color:"primary","aria-label":"upload picture",component:"span",children:Object(a.jsx)($t.a,{})})})]})]}),Object(a.jsxs)(f.a,{style:{paddingLeft:18,paddingTop:10,paddingBottom:5},container:!0,xs:12,justify:"center",spacing:2,children:[Object(a.jsx)(f.a,{item:!0,xs:6,children:"admin"===(null===b||void 0===b?void 0:b.role)&&Object(a.jsx)(fe.a,{onClick:function(){return O.goBack()},fullWidth:!0,variant:"contained",color:"default",children:"BACK"})}),Object(a.jsx)(f.a,{item:!0,xs:6,children:r("NEXT")})]})]})}}))},Vn={branch_manager:re("Branch Manager"),agency_manager:re("Agency Manager"),supervisor:re("Supervisor"),sales_agent:ae.a.optional(),position:re("Position"),insured_employee:ae.a.optional()},Yn=function(e){var t=Object(s.a)(e.state,2),n=t[0],c=t[1],r=e.onBack,o=e.onNext,l=e.employees,d=Object(i.useState)(null),j=Object(s.a)(d,2),m=j[0],b=j[1],p={state:[n,c],onSubmit:o,validator:Vn,radioButtonDefaultValue:n.position};Object(i.useEffect)((function(){c({position:"sales_agent"})}),[m]);var O,h=function(e){return l.filter((function(t){var n,a;return(null===(n=t.position)||void 0===n?void 0:n.id)===e&&+(null===m||void 0===m?void 0:m.value)===(null===(a=t.branch)||void 0===a?void 0:a.id)})).map((function(e){var t,n;return{value:e.id||"",name:"".concat(null===(t=e.profile)||void 0===t?void 0:t.lastname,", ").concat(null===(n=e.profile)||void 0===n?void 0:n.firstname)}}))},v=[],x=new Map,g=Object(nn.a)(l);try{for(g.s();!(O=g.n()).done;){var y,S,_,T,E=O.value;if(!x.has(null===E||void 0===E||null===(y=E.branch)||void 0===y?void 0:y.id))x.set(null===E||void 0===E||null===(S=E.branch)||void 0===S?void 0:S.id,!0),v.push({value:+(null===(_=E.branch)||void 0===_?void 0:_.id),name:null===(T=E.branch)||void 0===T?void 0:T.name})}}catch(A){g.e(A)}finally{g.f()}var L=function(e){var t=v.find((function(t){return t.value===+e.target.value}));console.log(t),b(t||null)};return Object(a.jsx)(fn,Object(u.a)(Object(u.a)({},p),{},{children:function(e){var t=e.myRadio,i=e.mySelect,c=e.myButton;return Object(a.jsxs)(a.Fragment,{children:[Object(a.jsxs)(f.a,{style:{paddingLeft:10,marginTop:5},spacing:2,container:!0,xs:12,children:[Object(a.jsx)(f.a,{item:!0,xs:12,children:i({label:"Branch",value:(null===m||void 0===m?void 0:m.value)||"",name:"branch",labelWidth:120,onChange:L,options:v})}),Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)(f.a,{item:!0,xs:10,children:i({label:"Branch Manager",value:n.branch_manager||"",name:"branch_manager",labelWidth:120,options:h(1)})}),Object(a.jsx)(f.a,{container:!0,item:!0,xs:2,justify:"center",alignItems:"center",children:t({value:"branch_manager",name:"position"})})]}),Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)(f.a,{item:!0,xs:10,children:i({label:"Agency Manager",value:n.agency_manager||"",name:"agency_manager",labelWidth:120,options:h(2)})}),Object(a.jsx)(f.a,{container:!0,item:!0,xs:2,justify:"center",alignItems:"center",children:t({value:"agency_manager",name:"position"})})]}),Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)(f.a,{item:!0,xs:10,children:i({label:"Supervisor",value:n.supervisor||"",name:"supervisor",labelWidth:80,options:h(3)})}),Object(a.jsx)(f.a,{container:!0,item:!0,xs:2,justify:"center",alignItems:"center",children:t({value:"supervisor",name:"position"})})]}),Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)(f.a,{item:!0,xs:10,children:i({label:"Sales Agent",value:n.sales_agent||"",name:"sales_agent",labelWidth:85,options:h(4)})}),Object(a.jsx)(f.a,{container:!0,item:!0,xs:2,justify:"center",alignItems:"center",children:t({value:"sales_agent",name:"position"})})]})]}),Object(a.jsxs)(f.a,{style:{paddingLeft:18,paddingTop:15,paddingBottom:15},container:!0,xs:12,justify:"center",spacing:2,children:[Object(a.jsx)(f.a,{item:!0,xs:6,children:Object(a.jsx)(fe.a,{onClick:function(){return r()},style:{paddingTop:15,paddingBottom:15},fullWidth:!0,variant:"contained",color:"default",children:"BACK"})}),Object(a.jsx)(f.a,{item:!0,xs:6,children:c("NEXT")})]})]})}}))},Xn=n(444),Jn=n(429),Qn=n(439),Zn=Object(Be.a)((function(e){return Object(De.a)({instructions:{padding:0,paddingBottom:20,backgroundColor:e.palette.background.default}})})),$n=function(e){var t=e.steps,n=e.activeStep,i=Zn();return Object(a.jsx)(Xn.a,{className:i.instructions,activeStep:n,alternativeLabel:!0,children:t.map((function(e){return Object(a.jsx)(Jn.a,{children:Object(a.jsx)(Qn.a,{children:e})},e)}))})},ea={plan:re("Plan"),amount:ae.a.number().required().label("Amount"),payment_mode:re("Payment Mode"),or_number:re("OR Number"),payment_period:ae.a.when("payment_mode",{is:ae.a.string().valid("Fullpayment"),then:ae.a.valid(null),otherwise:re("Payment Period")}),created_at:re("Insure Date")},ta=function(e){var t=Object(s.a)(e.state,2),n=t[0],c=t[1],r=e.onBack,o=e.onNext,l=Object(i.useContext)(Pn),d=Object(s.a)(l,2),j=d[0],m=(d[1],Object(i.useState)([])),b=Object(s.a)(m,2),p=b[0],O=b[1];Object(i.useEffect)((function(){if(n.payment_mode&&n.plan){var e=j.plans.filter((function(e){return e.id===n.plan}))[0];c((function(t){var n;return Object(u.a)(Object(u.a)({},t),{},{amount:null!==(n=Dn(Object(u.a)(Object(u.a)({},t),{},{plan:e})))&&void 0!==n?n:0})}))}}),[n.payment_mode,n.payment_period,n.plan]),Object(i.useEffect)((function(){var e=j.plans.map((function(e){return{value:e.id,name:e.name}}));O(e)}),[j.plans]);var h={state:[n,c],onSubmit:o,validator:ea};return Object(a.jsx)(fn,Object(u.a)(Object(u.a)({},h),{},{children:function(e){var t=e.myControlledInput,i=e.myInput,c=e.mySelect,o=e.myButton,l=e.myDateTimePicker;return Object(a.jsxs)(a.Fragment,{children:[c({label:"Plan",value:n.plan,name:"plan",labelWidth:30,options:p}),c({label:"Payment Mode",value:n.payment_mode,name:"payment_mode",labelWidth:110,options:[{value:"Installment"},{value:"Fullpayment"}]}),n.payment_mode&&n.plan&&Object(a.jsxs)(a.Fragment,{children:["Installment"===n.payment_mode&&c({label:"Payment Period",value:n.payment_period,name:"payment_period",labelWidth:120,options:[{value:"Monthly"},{value:"Quarterly"},{value:"Semi-Annually"},{value:"Annually"}]}),Object(a.jsxs)(f.a,{xs:12,spacing:1,style:{marginBottom:10,marginTop:5,paddingLeft:8},container:!0,children:[t({label:"Amount",name:"amount",value:n.amount}),Object(a.jsx)(f.a,{style:{marginTop:10},xs:12,item:!0,children:i({label:"OR Number",name:"or_number"})})]}),l({label:"Insure Date",value:n.created_at,name:"created_at"})]}),Object(a.jsxs)(f.a,{style:{paddingLeft:18,paddingTop:15,paddingBottom:15},container:!0,xs:12,justify:"center",spacing:2,children:[Object(a.jsx)(f.a,{item:!0,xs:6,children:Object(a.jsx)(fe.a,{onClick:function(){return r()},fullWidth:!0,variant:"contained",color:"default",children:"BACK"})}),Object(a.jsx)(f.a,{item:!0,xs:6,children:o("PAY")})]})]})}}))},na=function(){var e=Object(i.useContext)(je),t=Object(s.a)(e,2),n=t[0].currentUser,r=t[1],o=Gt.a.animateScroll,l=Object(i.useState)([]),d=Object(s.a)(l,2),b=d[0],p=d[1];Object(i.useEffect)((function(){r({type:"SET_TITLE",payload:"Client Registration"}),o.scrollToTop({duration:500}),wt({category:"active"}).then((function(e){p(e)}))}),[]);var O=Object(j.g)(),h=function(e){var t=c.a.useState(0),n=Object(s.a)(t,2),a=n[0],i=n[1];return{steps:e,activeStep:a,handleNext:function(){i((function(e){return e+1}))},handleBack:function(){i((function(e){return e-1}))},handleReset:function(){i(0)}}}(["Create Profile Account","Select All Commissioners","Select Plan And Payment"]),v=c.a.useState({}),x=Object(s.a)(v,2),g=x[0],y=x[1],S=c.a.useState({position:"sales_agent"}),_=Object(s.a)(S,2),T=_[0],E=_[1],L=c.a.useState({years_to_pay:5,created_at:new Date(Date.now())}),A=Object(s.a)(L,2),C=A[0],I=A[1],w=function(){var e=Object(Ct.a)(At.a.mark((function e(t){return At.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:o.scrollToTop({duration:500}),console.log("profile",t),y(t),h.handleNext();case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),k=function(){var e=Object(Ct.a)(At.a.mark((function e(t){var n,a;return At.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=null!==(n=t[t.position])&&void 0!==n?n:0){e.next=4;break}return r({type:"SET_ALERT",payload:{message:"Sales Agent is not present! Please select another employee.",type:"error"}}),e.abrupt("return");case 4:o.scrollToTop({duration:500}),I((function(e){return Object(u.a)(Object(u.a)({},e),{},{insured_employee:a})})),E(t),h.handleNext(),console.log(t);case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),N=function(){var e=Object(Ct.a)(At.a.mark((function e(t){var n;return At.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o.scrollToTop({duration:500}),n=Object(u.a)(Object(u.a)(Object(u.a)(Object(u.a)({},g),t),T),{},{branch:B(+(null===T||void 0===T?void 0:T.branch_manager))}),e.abrupt("return",xn(null===n||void 0===n?void 0:n.image,(function(e){return n.image_url=e,delete n.image,wn(n).then((function(){r({type:"SET_ALERT",payload:{message:"Successfully added",type:"success"}}),r({type:"SET_IS_LOADING",payload:!1}),h.handleNext()})).catch((function(e){400!==e.response.status?(r({type:"SET_ALERT",payload:{message:e.message,type:"error"}}),r({type:"SET_IS_LOADING",payload:!1})):r({type:"SET_ALERT",payload:{message:e.response.data.error,type:"error"}})}))})));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),B=function(e){var t;return null===(t=b.filter((function(t){return t.id===e}))[0].branch)||void 0===t?void 0:t.id};return Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)($n,Object(u.a)({},h)),0===h.activeStep&&Object(a.jsx)(zn,{onNext:w,state:[g,y]}),1===h.activeStep&&Object(a.jsx)(Yn,{employees:b,onBack:function(){return h.handleBack()},onNext:k,state:[T,E]}),2===h.activeStep&&Object(a.jsx)(ta,{onBack:function(){return h.handleBack()},onNext:N,state:[C,I]}),3===h.activeStep&&Object(a.jsxs)(f.a,{container:!0,xs:12,direction:"column",alignItems:"center",children:[Object(a.jsx)(m.a,{component:"h6",variant:"subtitle1",children:"All Steps Completed!"}),Object(a.jsxs)(f.a,{spacing:2,item:!0,container:!0,xs:12,children:[Object(a.jsx)(f.a,{item:!0,xs:6,children:"admin"===(null===n||void 0===n?void 0:n.role)&&Object(a.jsx)(fe.a,{onClick:function(){return O.replace("/clients")},style:{marginTop:10},fullWidth:!0,variant:"contained",color:"default",children:"CLIENT LIST"})}),Object(a.jsx)(f.a,{item:!0,xs:6,children:Object(a.jsx)(fe.a,{onClick:function(){h.handleReset(),y({}),E({position:"sales_agent"}),I({years_to_pay:5,created_at:new Date(Date.now())})},style:{marginTop:10},fullWidth:!0,variant:"contained",color:"primary",children:"ADD NEW"})})]})]})]})},aa={username:re("Username"),password:ae.a.string().min(8).max(50).required().label("Password")},ia=n.p+"static/media/revenue.a8292d0f.svg",ca=Object(Be.a)((function(e){return Object(De.a)({formContainer:{display:"flex",flexDirection:"column",justifyContent:"flex-end",marginTop:50,paddingLeft:20,paddingRight:20}})})),ra=function(){var e=ca(),t=Object(i.useContext)(je),n=Object(s.a)(t,2),c=(n[0],n[1]);Object(j.g)();Object(i.useEffect)((function(){c({type:"SET_TITLE",payload:"BRAND NAME"})}),[]);var r=Object(i.useState)({username:"admin123",password:"admin123"}),o=Object(s.a)(r,2),l=o[0],d=o[1],m={state:[l,d],onSubmit:function(){var e=Object(Ct.a)(At.a.mark((function e(t){return At.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",ke(t).then((function(e){se(e);var t=le();c({type:"SET_CURRENT_USER",payload:t})})).catch((function(e){var t=e.response;401===t.status&&c({type:"SET_ALERT",payload:{message:t.data.error,type:"error"}})})));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),validator:aa};return Object(a.jsxs)(f.a,{style:{minHeight:450},justify:"space-between",container:!0,direction:"column",xs:12,children:[Object(a.jsx)(f.a,{style:{marginTop:20},direction:"row",container:!0,justify:"center",alignItems:"flex-start",children:Object(a.jsx)("img",{style:{zIndex:1},width:300,src:ia,alt:"brand logo"})}),Object(a.jsx)("div",{className:e.formContainer,children:Object(a.jsx)(fn,Object(u.a)(Object(u.a)({},m),{},{children:function(e){var t=e.myInput,n=e.myButton;return Object(a.jsxs)(a.Fragment,{children:[t({label:"Username",value:l.username,name:"username"}),t({label:"Password",value:l.password,name:"password",type:"password"}),n("LOGIN")]})}}))})]})},oa=function(e){e.path;var t=e.component,n=e.render,c=e.isAdmin,r=void 0!==c&&c,o=Object(ut.a)(e,["path","component","render","isAdmin"]),l=Object(i.useContext)(je),d=(Object(s.a)(l,1)[0],le());return Object(a.jsx)(j.b,Object(u.a)(Object(u.a)({},o),{},{render:function(e){return d?r&&"admin"!==(null===d||void 0===d?void 0:d.role)?Object(a.jsx)(j.a,{to:{pathname:"/not-found",state:{from:e.location}}}):t?Object(a.jsx)(t,Object(u.a)({},e)):null===n||void 0===n?void 0:n(e):Object(a.jsx)(j.a,{to:{pathname:"/signin",state:{from:e.location}}})}}))},la=function(e){e.path;var t=e.component,n=e.render,c=(e.isAdmin,Object(ut.a)(e,["path","component","render","isAdmin"])),r=Object(i.useContext)(je);Object(s.a)(r,1)[0];return Object(a.jsx)(j.b,Object(u.a)(Object(u.a)({},c),{},{render:function(e){return le()?Object(a.jsx)(j.a,{to:{pathname:"/",state:{from:e.location}}}):t?Object(a.jsx)(t,Object(u.a)({},e)):null===n||void 0===n?void 0:n(e)}}))},sa={branch_manager:re("Branch Manager"),agency_manager:re("Agency Manager"),supervisor:re("Supervisor"),position:re("Position"),amount:ae.a.number().positive().not(0).required().label("Amount"),payment_mode:re("Payment Mode"),or_number:re("OR Number")},da=function(e){var t=Object(s.a)(e.state,2),n=t[0],c=t[1],r=e.onSubmit,o=e.employees,l={state:[n,c],onSubmit:r,validator:sa,radioButtonDefaultValue:n.position},d=Object(i.useState)(null),j=Object(s.a)(d,2),m=j[0],b=j[1];console.log({transaction:n});var p=[];Object(i.useEffect)((function(){b(p.find((function(e){var t;return e.value===+(null===n||void 0===n||null===(t=n.branch)||void 0===t?void 0:t.id)}))||null)}),[]),Object(i.useEffect)((function(){c((function(e){return Object(u.a)(Object(u.a)({},e),{},{branch_manager:"",agency_manager:"",supervisor:"",sales_agent:""})}))}),[m]);var O,h=function(e){var t=p.find((function(t){return t.value===+e.target.value}));b(t||null)},v=function(e){return o.filter((function(t){var n,a;return(null===(n=t.position)||void 0===n?void 0:n.id)===e&&+(null===m||void 0===m?void 0:m.value)===(null===(a=t.branch)||void 0===a?void 0:a.id)})).map((function(e){var t,n;return{value:e.id||"",name:"".concat(null===(t=e.profile)||void 0===t?void 0:t.lastname,", ").concat(null===(n=e.profile)||void 0===n?void 0:n.firstname)}}))},x=new Map,g=Object(nn.a)(o);try{for(g.s();!(O=g.n()).done;){var y,S,_,T,E=O.value;if(!x.has(null===E||void 0===E||null===(y=E.branch)||void 0===y?void 0:y.id))x.set(null===E||void 0===E||null===(S=E.branch)||void 0===S?void 0:S.id,!0),p.push({value:+(null===(_=E.branch)||void 0===_?void 0:_.id),name:null===(T=E.branch)||void 0===T?void 0:T.name})}}catch(A){g.e(A)}finally{g.f()}var L="Installment"!==n.payment_mode&&"Fullpayment"===n.payment_mode?"Balance":"Amount";return Object(a.jsx)(fn,Object(u.a)(Object(u.a)({},l),{},{children:function(e){var t=e.myRadio,i=e.mySelect,c=e.myButton,r=e.myControlledInput,o=e.myInput;return Object(a.jsx)(a.Fragment,{children:Object(a.jsxs)(f.a,{style:{paddingLeft:10,marginTop:5,marginBottom:10},spacing:2,container:!0,xs:12,children:[i({label:"Payment Mode",value:n.payment_mode,name:"payment_mode",labelWidth:110,options:[{value:"Installment"},{value:"Fullpayment"}]}),r({label:L,value:n.amount,name:"amount"}),o({label:"OR Number",value:n.or_number,name:"or_number"}),i({label:"Branch",value:(null===m||void 0===m?void 0:m.value)||"",name:"branch",labelWidth:120,onChange:h,options:p}),Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)(f.a,{item:!0,xs:10,children:i({label:"Branch Manager",value:n.branch_manager,name:"branch_manager",labelWidth:120,options:v(1)})}),Object(a.jsx)(f.a,{container:!0,item:!0,xs:2,justify:"center",alignItems:"center",children:t({value:"branch_manager",name:"position"})})]}),Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)(f.a,{item:!0,xs:10,children:i({label:"Agency Manager",value:n.agency_manager,name:"agency_manager",labelWidth:120,options:v(2)})}),Object(a.jsx)(f.a,{container:!0,item:!0,xs:2,justify:"center",alignItems:"center",children:t({value:"agency_manager",name:"position"})})]}),Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)(f.a,{item:!0,xs:10,children:i({label:"Supervisor",value:n.supervisor,name:"supervisor",labelWidth:80,options:v(3)})}),Object(a.jsx)(f.a,{container:!0,item:!0,xs:2,justify:"center",alignItems:"center",children:t({value:"supervisor",name:"position"})})]}),Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)(f.a,{item:!0,xs:10,children:i({label:"Sales Agent",value:n.sales_agent,name:"sales_agent",labelWidth:85,options:v(4)})}),Object(a.jsx)(f.a,{container:!0,item:!0,xs:2,justify:"center",alignItems:"center",children:t({value:"sales_agent",name:"position"})})]}),c()]})})}}))},ua=function(e){return we.post("/payments",e).then((function(e){return e.data}))},ja=function(){var e,t=Object(i.useContext)(Pn),n=Object(s.a)(t,2),c=n[0],r=n[1],o=Object(i.useContext)(je),l=Object(s.a)(o,2),d=l[0],j=l[1],b=Object(i.useState)([]),p=Object(s.a)(b,2),O=p[0],h=p[1],v=Object(i.useState)({position:"sales_agent",amount:0}),x=Object(s.a)(v,2),g=x[0],y=x[1];Object(i.useEffect)((function(){return r({type:"SET_IS_LOADING",payload:!0}),j({type:"SET_TITLE",payload:"Encode Transaction"}),j({type:"SET_IS_LOADING",payload:!0}),Bn("").then((function(e){r({type:"ON_LOAD_CLIENTS",payload:{clients:e}}),j({type:"SET_IS_LOADING",payload:!1})})),wt({category:"active"}).then((function(e){h(e)})),function(){j({type:"SET_IS_LOADING",payload:!1})}}),[]),Object(i.useEffect)((function(){if(g.id){var e=0;switch(g.payment_mode){case"Installment":e=Dn(g);break;case"Fullpayment":e=null===g||void 0===g?void 0:g.balance}y((function(t){return Object(u.a)(Object(u.a)({},t),{},{amount:e})})),(t=g.id,we.get("/commissions/client/"+t).then((function(e){return e.data}))).then((function(e){var t=function(t){var n;return(null===(n=e.find((function(e){var n,a,i;return"admin"===(null===(n=d.currentUser)||void 0===n?void 0:n.role)?e.positionId===t:e.positionId===t&&e.branchId===(null===(a=d.currentUser)||void 0===a||null===(i=a.branch)||void 0===i?void 0:i.id)})))||void 0===n?void 0:n.id)||""},n=t(1),a=t(2),i=t(3),c=t(4);y((function(e){return Object(u.a)(Object(u.a)({},e),{},{branch_manager:n,agency_manager:a,supervisor:i,sales_agent:c})}))}))}var t}),[g.payment_mode,g.id]);var S=function(){var e=Object(Ct.a)(At.a.mark((function e(t){var n,a,i,c,r,o,l,s,d,u,m;return At.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.id){e.next=3;break}return j({type:"SET_ALERT",payload:{message:"Please Select a Client!",type:"error"}}),e.abrupt("return");case 3:if(a=null!==(n=t[t.position])&&void 0!==n?n:0){e.next=7;break}return j({type:"SET_ALERT",payload:{message:"Sales Agent is not present! Please select another employee.",type:"error"}}),e.abrupt("return");case 7:return i=t.id,c=t.amount,r=t.or_number,o=t.branch_manager,l=t.agency_manager,s=t.supervisor,d=t.sales_agent,u=t.created_at,m={client:i,insured_employee:a,amount:c,or_number:r,branch_manager:o,agency_manager:l,supervisor:s,sales_agent:d,created_at:u},e.abrupt("return",ua(m).then((function(e){j({type:"SET_ALERT",payload:{message:"Successfully save!",type:"success"}}),y({position:"sales_agent",amount:0})})).catch((function(e){400!==e.response.status?j({type:"SET_ALERT",payload:{message:e.message,type:"error"}}):j({type:"SET_ALERT",payload:{message:e.response.data.error,type:"error"}})})));case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),_=c.isLoading&&!c.clients.length;return Object(a.jsxs)(f.a,{container:!0,direction:"column",xs:12,children:[Object(a.jsx)(yt,{onSearch:function(e){j({type:"SET_IS_LOADING",payload:!0}),Bn(e).then((function(e){r({type:"ON_LOAD_CLIENTS",payload:{clients:e}}),j({type:"SET_IS_LOADING",payload:!1}),y({position:"sales_agent",amount:0})}))},labelWidth:100,label:"Name / Code"}),_&&Object(a.jsx)(Xt,{}),!_&&Object(a.jsx)(Yt,{onSelected:function(e){y((function(t){return Object(u.a)(Object(u.a)({},t),e)}))},style:{marginTop:10},items:c.clients,children:function(e){var t=e.renderCards,n=e.item;return Object(a.jsx)(a.Fragment,{children:t({title:"".concat(null===n||void 0===n?void 0:n.lastname,", ").concat(null===n||void 0===n?void 0:n.firstname," ").concat(null===n||void 0===n?void 0:n.middlename),subtitle:n.code,src:n.image_url,item:n})})}}),Object(a.jsx)(X.a,{style:{margin:20}}),!g.id&&Object(a.jsx)(f.a,{container:!0,xs:12,justify:"center",children:Object(a.jsx)(m.a,{component:"h6",variant:"h6",children:"No Selected Client"})}),g.id&&Object(a.jsxs)(f.a,{style:{paddingLeft:10,paddingRight:20},xs:12,container:!0,justify:"space-between",children:[Object(a.jsxs)(f.a,{item:!0,xs:8,children:[Object(a.jsx)(m.a,{component:"h6",variant:"h6",children:"".concat(null===g||void 0===g?void 0:g.lastname,", ").concat(null===g||void 0===g?void 0:g.firstname," ").concat(null===g||void 0===g?void 0:g.middlename)}),Object(a.jsx)(m.a,{variant:"subtitle2",color:"textSecondary",children:null===g||void 0===g?void 0:g.code}),Object(a.jsx)(m.a,{variant:"subtitle2",color:"textSecondary",children:(null===g||void 0===g||null===(e=g.plan)||void 0===e?void 0:e.name)+" - "+(null===g||void 0===g?void 0:g.payment_period)}),Object(a.jsx)(m.a,{variant:"caption",color:"textSecondary",children:"Lapse on "+new Date(null===g||void 0===g?void 0:g.next_payment).toDateString()})]}),Object(a.jsx)(f.a,{item:!0,xs:4,children:Object(a.jsx)(Fe,{src:g.image_url})})]}),Object(a.jsx)(X.a,{style:{margin:20}}),!_&&g.id&&Object(a.jsx)(da,{employees:O,onSubmit:S,state:[g,y]})]})},ma=n(431),ba=n(430),pa=function(){var e=Object(i.useContext)(je),t=Object(s.a)(e,2),n=t[0],c=t[1];return Object(a.jsx)(f.a,{xs:12,container:!0,children:Object(a.jsx)(bt,{title:"General Settings",children:Object(a.jsxs)(f.a,{style:{padding:20},direction:"column",container:!0,xs:12,children:[Object(a.jsx)(m.a,{variant:"subtitle1",children:"Theme"}),Object(a.jsx)(ba.a,{control:Object(a.jsx)(ma.a,{checked:n.isDark,onChange:function(){return c({type:"TOGGLE_THEME"})},name:"checkedA",inputProps:{"aria-label":"secondary checkbox"}}),label:"Dark Mode"}),Object(a.jsx)(fe.a,{onClick:function(){localStorage.setItem("theme",n.isDark?"dark":"light"),c({type:"SET_ALERT",payload:{message:"Saved",type:"success"}})},fullWidth:!0,variant:"text",color:"primary",children:"Save"})]})})})},Oa=function(){var e=Object(j.g)(),t=Object(j.i)(),n=Object(i.useContext)(je),c=Object(s.a)(n,2),r=(c[0],c[1]),o=Object(i.useContext)(Pn),l=Object(s.a)(o,2),d=l[0],b=(l[1],Object(i.useState)(null)),O=Object(s.a)(b,2),h=O[0],v=O[1],x=Object(i.useState)({firstname:"",middlename:"",lastname:"",address:"",contact:""}),g=Object(s.a)(x,2),y=g[0],S=g[1];Object(i.useEffect)((function(){r({type:"SET_TITLE",payload:"Edit Client Profile"});var e=d.clients.filter((function(e){return e.id===+t.id}))[0];S(e)}),[]);var _=function(){var e=Object(Ct.a)(At.a.mark((function e(t){return At.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",xn(null===t||void 0===t?void 0:t.image,(function(e){return delete t.image,kn(Object(u.a)(Object(u.a)({},t),{},{image_url:e||t.image_url})).then((function(){r({type:"SET_ALERT",payload:{message:"Successfully saved",type:"success"}}),r({type:"SET_IS_LOADING",payload:!1})})).catch((function(e){400===e.response.status&&r({type:"SET_ALERT",payload:{message:e.response.data.error,type:"error"}}),r({type:"SET_IS_LOADING",payload:!1})}))})));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),T={state:[y,S],onSubmit:_,validator:Kn};return Object(a.jsx)(fn,Object(u.a)(Object(u.a)({},T),{},{children:function(t){var n=t.myControlledInput,i=t.mySelect,c=t.myDateTimePicker,r=t.myButton;return Object(a.jsxs)(a.Fragment,{children:[n({label:"Firstname",value:y.firstname,name:"firstname"}),n({label:"Middlename",value:y.middlename,name:"middlename"}),n({label:"Lastname",value:y.lastname,name:"lastname"}),n({label:"Contact Number",value:y.contact,name:"contact"}),n({label:"Address",value:y.address,name:"address",isMultiline:!0}),i({label:"Gender",value:y.gender,name:"gender",options:[{value:"Male"},{value:"Female"},{value:"Other"}]}),i({label:"Civil Status",value:y.civil,name:"civil",labelWidth:80,options:[{value:"Single"},{value:"Married"},{value:"Widowed"}]}),c({label:"Birthdate",value:y.birthdate,name:"birthdate"}),Object(a.jsxs)(f.a,{container:!0,style:{paddingLeft:15,paddingRight:15,marginBottom:10},alignItems:"center",justify:"space-between",xs:12,children:[Object(a.jsx)(m.a,{variant:"subtitle1",children:(null===h||void 0===h?void 0:h.name)||"Select Photo"}),Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)("input",{accept:"image/*",style:{display:"none"},name:"image",id:"icon-button-file",type:"file",onChange:function(e){v(e.target.files[0])}}),Object(a.jsx)("label",{htmlFor:"icon-button-file",children:Object(a.jsx)(p.a,{color:"primary","aria-label":"upload picture",component:"span",children:Object(a.jsx)($t.a,{})})})]})]}),Object(a.jsxs)(f.a,{style:{paddingLeft:18,paddingTop:10,paddingBottom:5},container:!0,xs:12,justify:"center",spacing:2,children:[Object(a.jsx)(f.a,{item:!0,xs:6,children:Object(a.jsx)(fe.a,{onClick:function(){return e.goBack()},fullWidth:!0,variant:"contained",color:"default",children:"BACK"})}),Object(a.jsx)(f.a,{item:!0,xs:6,children:r()})]})]})}}))},ha=Object(i.createContext)(null),va=function(e,t){switch(t.type){case"ON_LOAD_PAYMENTS":e.payments=t.payload.payments,e.total=t.payload.total,e.pages=t.payload.pages,e.isLoading=!1;break;case"SET_TOTAL":e.total=t.payload;break;case"SET_PAGES":e.pages=t.payload;break;case"SET_IS_LOADING":e.isLoading=t.payload;break;default:return e}return e},fa=function(e){var t=Object(i.useReducer)(Object(te.a)(va),{payments:[],total:0,pages:0,isLoading:!1}),n=Object(s.a)(t,2),c=n[0],r=n[1];return Object(a.jsx)(ha.Provider,{value:[c,r],children:e.children})},xa=function(e){var t,n,i,c,r,o,l,s,d=e.payment,u=Object(j.g)(),b=d.client,p="".concat(null===b||void 0===b||null===(t=b.profile)||void 0===t?void 0:t.lastname,", ").concat(null===b||void 0===b||null===(n=b.profile)||void 0===n?void 0:n.firstname," ").concat(null===b||void 0===b||null===(i=b.profile)||void 0===i?void 0:i.middlename);return Object(a.jsx)(bt,{title:"OR#"+d.or_number,style:{paddingBottom:5},children:Object(a.jsxs)(at.a,{children:[Object(a.jsxs)(f.a,{style:{marginBottom:20},xs:12,justify:"space-between",container:!0,children:[Object(a.jsxs)(f.a,{style:{paddingLeft:10},container:!0,item:!0,direction:"column",xs:7,justify:"flex-start",children:[Object(a.jsx)(m.a,{component:"h3",variant:"h6",children:p}),Object(a.jsx)(m.a,{variant:"subtitle1",color:"textSecondary",children:null===(c=d.client)||void 0===c?void 0:c.code}),Object(a.jsx)(m.a,{variant:"subtitle1",color:"textSecondary",children:null===(r=d.client)||void 0===r||null===(o=r.branch)||void 0===o?void 0:o.name}),Object(a.jsx)(m.a,{variant:"subtitle1",color:"textSecondary",children:ue(null===d||void 0===d?void 0:d.amount)})]}),Object(a.jsx)(f.a,{container:!0,item:!0,xs:5,justify:"center",alignItems:"center",children:Object(a.jsx)(Fe,{src:null===d||void 0===d||null===(l=d.client)||void 0===l||null===(s=l.profile)||void 0===s?void 0:s.image_url,onClick:function(){return u.push("/payments/"+d.id)}})})]}),Object(a.jsx)(X.a,{style:{marginLeft:20,marginRight:20}}),Object(a.jsxs)(f.a,{style:{paddingLeft:15,paddingRight:15,paddingTop:20},container:!0,xs:12,justify:"space-evenly",children:[Object(a.jsx)(f.a,{item:!0,xs:3}),Object(a.jsx)(f.a,{item:!0,xs:6,children:Object(a.jsx)(fe.a,{onClick:function(){return u.push("/payments/"+d.id)},fullWidth:!0,variant:"text",color:"primary",children:"Commissioners"})}),Object(a.jsx)(f.a,{item:!0,xs:3})]})]})})},ga=function(){var e=Object(i.useContext)(je),t=Object(s.a)(e,2),n=(t[0],t[1]),c=Object(i.useContext)(ha),r=Object(s.a)(c,2),o=r[0],l=r[1],d=Object(i.useState)({value:"",name:"All"}),m=Object(s.a)(d,2),b=m[0],p=m[1],O=Object(i.useState)(1),h=Object(s.a)(O,2),v=h[0],x=h[1],g=Object(j.h)(),y=Object(j.g)();Object(i.useEffect)((function(){n({type:"SET_TITLE",payload:"Payment History"});var e=Ut.a.parse(g.search),t=e.page,a=e.search,i=t?+t:1;return x(i),S({page:i,search:a||""}),function(){n({type:"SET_IS_LOADING",payload:!1})}}),[]);var S=function(e){var t,a=e.page,i=e.search,c=e.category;n({type:"SET_IS_LOADING",payload:!0}),l({type:"SET_IS_LOADING",payload:!0}),(t={page:a,search:i,category:c},we.get("/payments?page=".concat((null===t||void 0===t?void 0:t.page)||"","&search=").concat((null===t||void 0===t?void 0:t.search)||"","&category=").concat((null===t||void 0===t?void 0:t.category)||"")).then((function(e){var t=e.data;return{total:t.count,pages:t.pages,payments:t.items.map((function(e){return Object(u.a)(Object(u.a)({},e),{},{payment:{id:e.payment_id},client:Object(u.a)(Object(u.a)({},e.client.profile),e.client)})}))}}))).then((function(e){var t=e.payments,a=e.total,i=e.pages;l({type:"ON_LOAD_PAYMENTS",payload:{payments:t,total:a,pages:i}}),n({type:"SET_IS_LOADING",payload:!1})})).catch((function(){return n({type:"SET_IS_LOADING",payload:!1})}))},_=o.isLoading&&!o.payments.length;return Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)(yt,{labelWidth:160,label:"Name / Code / Branch",onSearch:function(e){p({value:"",name:"All"}),S({page:1,search:e}),x(1)},style:{marginBottom:15}}),Object(a.jsx)(Mt,{count:o.total,onChipSelected:function(e){l({type:"SET_TOTAL",payload:0}),p(e),S({page:1,category:e.value}),x(1),y.push("/payments?page=1")},active:b,chips:[{value:"",name:"All"}]}),_&&Object(a.jsx)(Rt,{}),!_&&Object(a.jsxs)(f.a,{container:!0,spacing:2,direction:"column",justify:"flex-start",alignItems:"center",children:[o.payments.map((function(e){return Object(a.jsx)(f.a,{item:!0,xs:12,children:Object(a.jsx)(xa,{payment:e})},e.id)})),Object(a.jsx)($e.a,{style:{marginTop:15,marginBottom:15},variant:"outlined",color:"primary",count:o.pages,siblingCount:0,page:v,onChange:function(e,t){l({type:"SET_TOTAL",payload:0}),x(t),S({page:t,category:b.value}),y.push("/payments?page="+t)}})]})]})},ya=n(432),Sa=function(){var e,t,n,c,r,o,l,d,u,b,p=Object(j.g)(),O=Object(j.i)(),h=Object(i.useState)({}),v=Object(s.a)(h,2),x=v[0],g=v[1],y=Object(i.useState)(!0),S=Object(s.a)(y,2),_=S[0],T=S[1],E=Object(i.useContext)(je),L=Object(s.a)(E,2),A=(L[0],L[1]);Object(i.useEffect)((function(){var e;return A({type:"SET_TITLE",payload:"Payment Details"}),A({type:"SET_IS_LOADING",payload:!0}),(e=+O.id,we.get("/payments/"+e).then((function(e){return e.data}))).then((function(e){g(e),A({type:"SET_IS_LOADING",payload:!1}),T(!1)})).catch((function(){A({type:"SET_IS_LOADING",payload:!1}),T(!1)})),function(){A({type:"SET_IS_LOADING",payload:!1}),T(!1)}}),[]);var C=x.client,I="".concat(null===C||void 0===C||null===(e=C.profile)||void 0===e?void 0:e.lastname,", ").concat(null===C||void 0===C||null===(t=C.profile)||void 0===t?void 0:t.firstname," ").concat(null===C||void 0===C||null===(n=C.profile)||void 0===n?void 0:n.middlename);new Date(null===x||void 0===x||null===(c=x.client)||void 0===c?void 0:c.created_at);return Object(a.jsxs)(f.a,{container:!0,xs:12,children:[_&&Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)(Kt,{height:110}),Object(a.jsxs)(f.a,{container:!0,style:{marginBottom:10},xs:12,justify:"space-between",children:[Object(a.jsx)(m.a,{variant:"subtitle1",children:"Commissioners"}),Object(a.jsxs)(ya.a,{component:"button",variant:"body1",children:["View All(",null===x||void 0===x||null===(r=x.commissions)||void 0===r?void 0:r.length,")"]}),Object(a.jsx)(Xt,{})]})]}),!_&&Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)(bt,{title:"OR#"+x.or_number,style:{paddingBottom:5,marginBottom:10},children:Object(a.jsx)(at.a,{children:Object(a.jsxs)(f.a,{xs:12,direction:"row",container:!0,children:[Object(a.jsxs)(f.a,{item:!0,xs:7,children:[Object(a.jsx)(m.a,{component:"h3",variant:"h6",children:I}),Object(a.jsx)(m.a,{variant:"subtitle1",color:"textSecondary",children:null===(o=x.client)||void 0===o||null===(l=o.branch)||void 0===l?void 0:l.name}),Object(a.jsx)(m.a,{variant:"subtitle1",color:"textSecondary",children:"\u20b1 "+x.amount}),Object(a.jsx)(m.a,{variant:"caption",color:"textSecondary",children:"Paid on "+new Date(null===x||void 0===x?void 0:x.created_at).toDateString()})]}),Object(a.jsx)(f.a,{container:!0,item:!0,xs:5,justify:"center",alignItems:"center",children:Object(a.jsx)(Fe,{src:null===x||void 0===x||null===(d=x.client)||void 0===d||null===(u=d.profile)||void 0===u?void 0:u.image_url})})]})})}),!!(null===x||void 0===x||null===(b=x.commissions)||void 0===b?void 0:b.length)&&Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)(m.a,{variant:"subtitle1",children:"Commissioners"}),Object(a.jsx)(Yt,{style:{marginBottom:15,marginTop:10},onSelected:function(e){},items:null===x||void 0===x?void 0:x.commissions,children:function(e){var t,n,i,c,r,o,l,s,d=e.renderCards,u=e.item;return Object(a.jsx)(a.Fragment,{children:d({item:u,title:"".concat(null===(t=u.employee)||void 0===t||null===(n=t.profile)||void 0===n?void 0:n.lastname,", ").concat(null===(i=u.employee)||void 0===i||null===(c=i.profile)||void 0===c?void 0:c.firstname," (").concat(null===(r=u.employee)||void 0===r||null===(o=r.position)||void 0===o?void 0:o.name,")"),subtitle:"\u20b1 "+u.amount,src:null===(l=u.employee)||void 0===l||null===(s=l.profile)||void 0===s?void 0:s.image_url})})}})]})]}),Object(a.jsx)(f.a,{item:!0,xs:6,children:Object(a.jsx)(fe.a,{onClick:function(){return p.goBack()},fullWidth:!0,variant:"contained",color:"default",children:"BACK"})})]})},_a=function(e){var t=e.branch,n=e.onArchive,i=Object(j.g)();return Object(a.jsx)(bt,{title:"Branch#".concat(t.id),children:Object(a.jsxs)(at.a,{children:[Object(a.jsxs)(f.a,{style:{marginBottom:20},xs:12,direction:"column",container:!0,children:[Object(a.jsx)(m.a,{component:"h3",variant:"h6",children:t.name}),Object(a.jsx)(m.a,{variant:"subtitle1",color:"textSecondary",children:t.contact}),Object(a.jsx)(m.a,{variant:"subtitle1",color:"textSecondary",children:t.address})]}),Object(a.jsx)(X.a,{style:{marginLeft:20,marginRight:20}}),Object(a.jsxs)(f.a,{container:!0,xs:12,justify:"space-evenly",children:[Object(a.jsx)(p.a,{onClick:function(){return i.push("/branches/edit/"+t.id)},"aria-label":"edit",children:Object(a.jsx)(ct.a,{})}),Object(a.jsx)(p.a,{onClick:function(){return null===n||void 0===n?void 0:n(t)},"aria-label":"archive",children:Object(a.jsx)(ot.a,{})})]})]})})},Ta=function(){var e=Object(i.useContext)(_n),t=Object(s.a)(e,2),n=t[0],c=t[1],r=Object(i.useContext)(je),o=Object(s.a)(r,2),l=(o[0],o[1]),d=Object(j.g)();Object(i.useEffect)((function(){return l({type:"SET_TITLE",payload:"Branch Management"}),u(),function(){l({type:"SET_IS_LOADING",payload:!1})}}),[]);var u=function(e){l({type:"SET_IS_LOADING",payload:!0}),c({type:"SET_IS_LOADING",payload:!0}),gn(e).then((function(e){c({type:"ON_LOAD_BRANCHES",payload:e}),l({type:"SET_IS_LOADING",payload:!1})})).catch((function(){return l({type:"SET_IS_LOADING",payload:!1})}))},m=Object(i.useState)({}),b=Object(s.a)(m,2),p=b[0],O=b[1],h=Object(i.useState)(),v=Object(s.a)(h,2),x=v[0],g=v[1],y=function(e){g(e),O({open:!0,text:"Are you sure you want to archive ".concat(e.name,"?"),description:"Archieving will not permanently delete the branch account in the database."})},S=n.isLoading&&!n.branches.length;return Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)(Te,{onAgree:function(){var e;(e=null===x||void 0===x?void 0:x.id,we.delete("/branches/"+e).then((function(e){return e.data}))).then((function(e){u(),l({type:"SET_ALERT",payload:{message:"Successfully archived",type:"error"}})})),O({open:!1})},onDisagree:function(){return O({open:!1})},data:p}),Object(a.jsx)(yt,{onSearch:function(e){u(e)},style:{marginBottom:20}}),S&&Object(a.jsx)(Rt,{}),!S&&Object(a.jsx)(f.a,{container:!0,spacing:2,direction:"column",justify:"flex-start",alignItems:"center",children:n.branches.map((function(e){return Object(a.jsx)(f.a,{item:!0,xs:12,children:Object(a.jsx)(_a,{onArchive:y,branch:e})},e.id)}))}),Object(a.jsx)(et.a,{style:{position:"fixed",bottom:60,right:20},onClick:function(){return d.push("/branches/new")},color:"primary","aria-label":"add",children:Object(a.jsx)(nt.a,{})})]})},Ea={name:ae.a.string().required().label("Branch")},La=function(){var e=Object(i.useState)({}),t=Object(s.a)(e,2),n=t[0],c=t[1],r=Object(j.g)(),o={state:[n,c],onSubmit:function(){var e=Object(Ct.a)(At.a.mark((function e(t){return At.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:yn(t).then((function(e){return console.log(e)}));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),validator:Ea};return Object(a.jsx)(fn,Object(u.a)(Object(u.a)({},o),{},{children:function(e){var t=e.myInput,i=e.myButton;return Object(a.jsxs)(a.Fragment,{children:[t({label:"Branch Name",value:null===n||void 0===n?void 0:n.name,name:"name"}),t({label:"Contact",value:null===n||void 0===n?void 0:n.contact,name:"contact"}),t({label:"Address",value:null===n||void 0===n?void 0:n.contact,name:"address",isMultiline:!0}),Object(a.jsxs)(f.a,{style:{paddingLeft:18,paddingTop:10,paddingBottom:5},container:!0,xs:12,justify:"center",spacing:2,children:[Object(a.jsx)(f.a,{item:!0,xs:6,children:Object(a.jsx)(fe.a,{onClick:function(){return r.goBack()},fullWidth:!0,variant:"contained",color:"default",children:"BACK"})}),Object(a.jsx)(f.a,{item:!0,xs:6,children:i()})]})]})}}))},Aa=function(){var e=Object(i.useState)({name:"",contact:"",address:""}),t=Object(s.a)(e,2),n=t[0],c=t[1],r=Object(j.g)(),o=Object(j.i)();Object(i.useEffect)((function(){var e;(e=+o.id,we.get("/branches/"+e).then((function(e){return e.data}))).then((function(e){return c(e)}))}),[]);var l={state:[n,c],onSubmit:function(){var e=Object(Ct.a)(At.a.mark((function e(t){return At.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:Sn(t).then((function(e){return console.log(e)}));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),validator:Ea};return Object(a.jsx)(fn,Object(u.a)(Object(u.a)({},l),{},{children:function(e){var t=e.myButton,i=e.myControlledInput;return Object(a.jsxs)(a.Fragment,{children:[i({label:"Branch Name",value:null===n||void 0===n?void 0:n.name,name:"name"}),i({label:"Contact",value:null===n||void 0===n?void 0:n.contact,name:"contact"}),i({label:"Address",value:null===n||void 0===n?void 0:n.address,name:"address",isMultiline:!0}),Object(a.jsxs)(f.a,{style:{paddingLeft:18,paddingTop:10,paddingBottom:5},container:!0,xs:12,justify:"center",spacing:2,children:[Object(a.jsx)(f.a,{item:!0,xs:6,children:Object(a.jsx)(fe.a,{onClick:function(){return r.goBack()},fullWidth:!0,variant:"contained",color:"default",children:"BACK"})}),Object(a.jsx)(f.a,{item:!0,xs:6,children:t()})]})]})}}))},Ca=Object(i.createContext)(null),Ia=function(e,t){switch(t.type){case"ON_LOAD_COMMISSIONS":e.commissions=t.payload.commissions,e.total=t.payload.total,e.pages=t.payload.pages,e.isLoading=!1;break;case"SET_IS_LOADING":e.isLoading=t.payload;break;case"SET_TOTAL":e.total=t.payload;break;case"SET_PAGES":e.pages=t.payload;break;default:return e}return e},wa=function(e){var t=Object(i.useReducer)(Object(te.a)(Ia),{commissions:[],isLoading:!1,total:0,pages:0}),n=Object(s.a)(t,2),c=n[0],r=n[1];return Object(a.jsx)(Ca.Provider,{value:[c,r],children:e.children})},ka=function(e){var t,n,i,c,r,o,l,s,d,u,b,p=e.commission,O=Object(j.g)(),h="".concat(null===p||void 0===p||null===(t=p.employee)||void 0===t||null===(n=t.profile)||void 0===n?void 0:n.lastname,", ").concat(null===p||void 0===p||null===(i=p.employee)||void 0===i||null===(c=i.profile)||void 0===c?void 0:c.firstname," ").concat(null===p||void 0===p||null===(r=p.employee)||void 0===r||null===(o=r.profile)||void 0===o?void 0:o.lastname);return Object(a.jsx)(bt,{title:"OR#".concat(null===(l=p.payment)||void 0===l?void 0:l.or_number),children:Object(a.jsx)(at.a,{children:Object(a.jsxs)(f.a,{style:{marginBottom:20},xs:12,justify:"space-between",container:!0,children:[Object(a.jsxs)(f.a,{style:{paddingLeft:10},container:!0,item:!0,direction:"column",xs:7,justify:"flex-start",children:[Object(a.jsx)(m.a,{component:"h3",variant:"h6",children:h}),Object(a.jsx)(m.a,{variant:"subtitle1",color:"textSecondary",children:null===p||void 0===p||null===(s=p.employee)||void 0===s||null===(d=s.position)||void 0===d?void 0:d.name}),Object(a.jsx)(m.a,{variant:"subtitle1",color:"textSecondary",children:ue(null===p||void 0===p?void 0:p.amount)}),Object(a.jsx)(m.a,{variant:"caption",color:"textSecondary",children:new Date(null===p||void 0===p?void 0:p.created_at).toDateString()}),Object(a.jsx)(f.a,{item:!0,xs:1,children:Object(a.jsx)(dt.a,{style:{marginTop:5},size:"small",label:p.is_release?"release":"unrelease",variant:"outlined",color:p.is_release?"default":"secondary"})})]}),Object(a.jsx)(f.a,{container:!0,item:!0,xs:5,justify:"center",alignItems:"center",children:Object(a.jsx)(Fe,{src:null===p||void 0===p||null===(u=p.employee)||void 0===u||null===(b=u.profile)||void 0===b?void 0:b.image_url,onClick:function(){var e;return O.push("/payments/"+(null===p||void 0===p||null===(e=p.payment)||void 0===e?void 0:e.id))}})})]})})})},Na=function(){var e=Object(i.useContext)(je),t=Object(s.a)(e,2),n=(t[0],t[1]),c=Object(i.useContext)(Ca),r=Object(s.a)(c,2),o=r[0],l=r[1],d=Object(i.useState)({value:"",name:"All"}),u=Object(s.a)(d,2),m=u[0],b=u[1],p=Object(i.useState)(1),O=Object(s.a)(p,2),h=O[0],v=O[1],x=(Object(j.h)(),Object(j.g)());Object(i.useEffect)((function(){return n({type:"SET_TITLE",payload:"Commission History"}),g({page:1}),function(){n({type:"SET_IS_LOADING",payload:!1})}}),[]);var g=function(e){var t,a=e.page,i=e.search,c=e.category;n({type:"SET_IS_LOADING",payload:!0}),l({type:"SET_IS_LOADING",payload:!0}),(t={page:a,search:i,category:c},we.get("/commissions?page=".concat((null===t||void 0===t?void 0:t.page)||"","&search=").concat((null===t||void 0===t?void 0:t.search)||"","&category=").concat((null===t||void 0===t?void 0:t.category)||"")).then((function(e){var t=e.data;return{commissions:t.items,total:t.count,pages:t.pages}}))).then((function(e){var t=e.commissions,a=e.total,i=e.pages;l({type:"ON_LOAD_COMMISSIONS",payload:{commissions:t,total:a,pages:i}}),n({type:"SET_IS_LOADING",payload:!1})})).catch((function(){return n({type:"SET_IS_LOADING",payload:!1})}))},y=o.isLoading&&!o.commissions.length;return Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)(yt,{label:"Name",labelWidth:45,onSearch:function(e){b({value:"",name:"All"}),g({page:1,search:e}),v(1)},style:{marginBottom:10}}),Object(a.jsx)(Mt,{count:o.total,onChipSelected:function(e){l({type:"SET_TOTAL",payload:0}),b(e),g({page:1,category:e.value}),v(1),x.push("/commissions?page=1")},active:m,chips:[{value:"",name:"All"},{value:"release",name:"Release"},{value:"unrelease",name:"Unrelease"}]}),y&&Object(a.jsx)(Rt,{}),!y&&Object(a.jsxs)(f.a,{container:!0,spacing:2,direction:"column",justify:"flex-start",alignItems:"center",children:[o.commissions.map((function(e){return Object(a.jsx)(f.a,{item:!0,xs:12,children:Object(a.jsx)(ka,{commission:e})},e.id)})),Object(a.jsx)($e.a,{style:{marginTop:15,marginBottom:15},variant:"outlined",color:"primary",count:o.pages,siblingCount:0,page:h,onChange:function(e,t){l({type:"SET_TOTAL",payload:0}),v(t),g({page:t,category:m.value}),x.push("/commissions?page="+t)}})]})]})},Ba=function(e){var t,n,i,c,r,o,l,s,d,u,b,p,O,h=e.commission,v=e.onRelease;Object(j.g)();return Object(a.jsx)(a.Fragment,{children:Object(a.jsxs)(bt,{title:"Employee#"+(null===h||void 0===h||null===(t=h.employee)||void 0===t?void 0:t.id),style:{paddingBottom:5},children:[Object(a.jsx)(at.a,{children:Object(a.jsxs)(f.a,{container:!0,xs:12,justify:"space-between",children:[Object(a.jsxs)(f.a,{style:{paddingLeft:10},container:!0,item:!0,direction:"column",xs:7,justify:"flex-start",children:[Object(a.jsx)(m.a,{component:"h3",variant:"h6",children:"".concat(null===h||void 0===h||null===(n=h.employee)||void 0===n||null===(i=n.profile)||void 0===i?void 0:i.lastname,", ").concat(null===h||void 0===h||null===(c=h.employee)||void 0===c||null===(r=c.profile)||void 0===r?void 0:r.firstname," ").concat(null===h||void 0===h||null===(o=h.employee)||void 0===o||null===(l=o.profile)||void 0===l?void 0:l.middlename)}),Object(a.jsx)(m.a,{variant:"subtitle1",color:"textSecondary",children:null===h||void 0===h||null===(s=h.employee)||void 0===s||null===(d=s.branch)||void 0===d?void 0:d.name}),Object(a.jsx)(m.a,{variant:"subtitle1",color:"textSecondary",children:null===h||void 0===h||null===(u=h.employee)||void 0===u||null===(b=u.position)||void 0===b?void 0:b.name}),Object(a.jsx)(m.a,{variant:"subtitle1",color:"textSecondary",children:ue(null===h||void 0===h?void 0:h.amount)})]}),Object(a.jsx)(f.a,{container:!0,item:!0,xs:5,justify:"center",alignItems:"center",children:Object(a.jsx)(Fe,{src:null===h||void 0===h||null===(p=h.employee)||void 0===p||null===(O=p.profile)||void 0===O?void 0:O.image_url})})]})}),Object(a.jsx)(X.a,{style:{marginLeft:20,marginRight:20}}),Object(a.jsxs)(f.a,{style:{padding:15},container:!0,xs:12,justify:"space-evenly",children:[Object(a.jsx)(f.a,{item:!0,xs:3}),Object(a.jsx)(f.a,{item:!0,xs:6,children:Object(a.jsx)(fe.a,{onClick:function(){return null===v||void 0===v?void 0:v(h)},fullWidth:!0,variant:"text",color:"primary",children:"Release"})}),Object(a.jsx)(f.a,{item:!0,xs:3})]})]})})},Da=function(){var e=Object(i.useContext)(Ca),t=Object(s.a)(e,2),n=t[0],c=t[1],r=Object(i.useContext)(je),o=Object(s.a)(r,2),l=(o[0],o[1]),d=Object(i.useState)({value:"",name:"All"}),u=Object(s.a)(d,2),m=u[0],b=u[1],p=Object(i.useState)(1),O=Object(s.a)(p,2),h=O[0],v=O[1],x=Object(j.g)();Object(i.useEffect)((function(){return l({type:"SET_TITLE",payload:"Release Transaction"}),g({page:1}),function(){l({type:"SET_IS_LOADING",payload:!1})}}),[]);var g=function(e){var t,n=e.page,a=e.search,i=e.category;l({type:"SET_IS_LOADING",payload:!0}),c({type:"SET_IS_LOADING",payload:!0}),(t={page:n,search:a,category:i},we.get("/commissions/total/employees?page=".concat((null===t||void 0===t?void 0:t.page)||"","&search=").concat((null===t||void 0===t?void 0:t.search)||"","&category=").concat((null===t||void 0===t?void 0:t.category)||"")).then((function(e){var t=e.data,n=t.items.map((function(e){return{id:e.id,employee:{id:e.employee_id,profile:{firstname:e.firstname,middlename:e.middlename,lastname:e.lastname,image_url:e.image_url},branch:{name:e.branch_name},position:{name:e.position_name}},amount:e.total}}));return{total:t.count,pages:t.pages,commissions:n}}))).then((function(e){var t=e.commissions,n=e.total,a=e.pages;c({type:"ON_LOAD_COMMISSIONS",payload:{commissions:t,total:n,pages:a}}),l({type:"SET_IS_LOADING",payload:!1})})).catch((function(){return l({type:"SET_IS_LOADING",payload:!1})}))},y=Object(i.useState)({}),S=Object(s.a)(y,2),_=S[0],T=S[1],E=Object(i.useState)(),L=Object(s.a)(E,2),A=L[0],C=L[1],I=function(e){var t,n,a,i,c,r;C(e),T({open:!0,text:'Are you sure you want to release "'.concat(null===e||void 0===e||null===(t=e.employee)||void 0===t||null===(n=t.profile)||void 0===n?void 0:n.lastname,", ").concat(null===e||void 0===e||null===(a=e.employee)||void 0===a||null===(i=a.profile)||void 0===i?void 0:i.firstname," ").concat(null===e||void 0===e||null===(c=e.employee)||void 0===c||null===(r=c.profile)||void 0===r?void 0:r.middlename,'" commission?'),description:"Amounting of ".concat(ue(null===e||void 0===e?void 0:e.amount))})},w=n.isLoading&&!n.commissions.length;return Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)(Te,{onAgree:function(){var e,t;(t=null===A||void 0===A||null===(e=A.employee)||void 0===e?void 0:e.id,we.post("/commissions/release",{employeeId:t}).then((function(e){return e.data}))).then((function(e){g({page:h,category:m.value})})),T({open:!1})},onDisagree:function(){return T({open:!1})},data:_}),Object(a.jsx)(yt,{labelWidth:110,label:"Name / Branch",onSearch:function(e){b({value:"",name:"All"}),v(1),g({page:1,search:e}),x.push("/transaction/releases?search="+e)},style:{marginBottom:15}}),Object(a.jsx)(Mt,{count:n.total,onChipSelected:function(e){c({type:"SET_TOTAL",payload:0}),b(e),v(1),g({page:1,category:e.value}),e.value&&x.push("/transaction/releases")},active:m,chips:[{value:"",name:"All"},{value:1,name:"Branch Manager"},{value:2,name:"Agency Manager"},{value:3,name:"Supervisor"}]}),w&&Object(a.jsx)(Rt,{}),!w&&Object(a.jsxs)(f.a,{container:!0,spacing:2,direction:"column",justify:"flex-start",alignItems:"center",children:[n.commissions.map((function(e){return Object(a.jsx)(f.a,{item:!0,xs:12,children:Object(a.jsx)(Ba,{onRelease:I,commission:e})},e.id)})),Object(a.jsx)($e.a,{style:{marginTop:15,marginBottom:15},variant:"outlined",color:"primary",count:n.pages,siblingCount:0,page:h,onChange:function(e,t){c({type:"SET_TOTAL",payload:0}),v(t),g({page:t,category:m.value}),x.push("/transaction/releases?page="+t)}})]})]})},Ra=n.p+"static/media/404.b2df4ff4.svg",Fa=function(){return Object(a.jsxs)(f.a,{container:!0,justify:"center",children:[Object(a.jsx)("img",{width:"300",src:Ra,alt:"not found"}),Object(a.jsx)("h3",{children:"Page not found"})]})},Ma=function(e){var t,n=e.user,i=e.onArchive,c=Object(j.g)();return Object(a.jsx)(a.Fragment,{children:Object(a.jsxs)(bt,{title:"Username#"+(null===n||void 0===n?void 0:n.username),style:{paddingBottom:5},children:[Object(a.jsx)(at.a,{children:Object(a.jsxs)(f.a,{container:!0,xs:12,justify:"space-between",children:[Object(a.jsxs)(f.a,{style:{paddingLeft:10},container:!0,item:!0,direction:"column",xs:7,justify:"flex-start",children:[Object(a.jsx)(m.a,{component:"h3",variant:"h6",children:"".concat(null===n||void 0===n?void 0:n.lastname,", ").concat(null===n||void 0===n?void 0:n.firstname," ").concat(null===n||void 0===n?void 0:n.middlename)}),Object(a.jsx)(m.a,{variant:"subtitle1",color:"textSecondary",children:null===n||void 0===n||null===(t=n.branch)||void 0===t?void 0:t.name}),Object(a.jsx)(m.a,{variant:"subtitle1",color:"textSecondary",children:null===n||void 0===n?void 0:n.role})]}),Object(a.jsx)(f.a,{container:!0,item:!0,xs:5,justify:"center",alignItems:"center",children:Object(a.jsx)(Fe,{src:n.image_url,onClick:function(){return c.push("/users/"+n.id)}})})]})}),Object(a.jsx)(X.a,{style:{marginLeft:20,marginRight:20}}),Object(a.jsxs)(f.a,{container:!0,xs:12,justify:"space-evenly",children:[Object(a.jsx)(p.a,{onClick:function(){return c.push("/users/edit/"+n.id)},"aria-label":"edit",children:Object(a.jsx)(ct.a,{})}),Object(a.jsx)(p.a,{onClick:function(){return null===i||void 0===i?void 0:i(n)},"aria-label":"archive",children:Object(a.jsx)(ot.a,{})})]})]})})},Pa=Object(i.createContext)(null),Ga=function(e,t){switch(t.type){case"ON_LOAD_USERS":e.users=t.payload.users,e.total=t.payload.total,e.pages=t.payload.pages,e.isLoading=!1;break;case"SET_IS_LOADING":e.isLoading=t.payload;break;case"SET_TOTAL":e.total=t.payload;break;case"SET_PAGES":e.pages=t.payload;break;default:return e}return e},Wa=function(e){var t=Object(i.useReducer)(Object(te.a)(Ga),{users:[],isLoading:!1,pages:0,total:0}),n=Object(s.a)(t,2),c=n[0],r=n[1];return Object(a.jsx)(Pa.Provider,{value:[c,r],children:e.children})},Ua=function(){var e=Object(i.useContext)(Pa),t=Object(s.a)(e,2),n=t[0],c=t[1],r=Object(j.g)(),o=Object(i.useContext)(je),l=Object(s.a)(o,2),d=(l[0],l[1]),u=Object(i.useState)({value:"",name:"All"}),m=Object(s.a)(u,2),b=m[0],p=m[1],O=Object(i.useState)(1),h=Object(s.a)(O,2),v=h[0],x=h[1];Object(i.useEffect)((function(){d({type:"SET_TITLE",payload:"User Management"}),g({page:1,search:""})}),[]);var g=function(e){var t=e.page,n=e.search;d({type:"SET_IS_LOADING",payload:!0}),c({type:"SET_IS_LOADING",payload:!0}),function(e){var t=e.page,n=e.search;return we.get("/users?page=".concat(t||"","&search=").concat(n||"")).then((function(e){var t=e.data;return{users:t.items,pages:t.pages,total:t.count}}))}({page:t,search:n}).then((function(e){var t=e.users,n=e.pages,a=e.total;d({type:"SET_IS_LOADING",payload:!1}),c({type:"ON_LOAD_USERS",payload:{users:t,pages:n,total:a}})}))},y=function(e){I(e),E({open:!0,text:"Are you sure you want to archive ".concat(e.lastname,", ").concat(e.firstname," ").concat(e.middlename,"?"),description:"Archiving will not permanently delete the user account in the database."})},S=Object(i.useState)({}),_=Object(s.a)(S,2),T=_[0],E=_[1],L=Object(i.useState)(),A=Object(s.a)(L,2),C=A[0],I=A[1],w=n.isLoading&&!n.users.length;return Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)(Te,{onAgree:function(){var e;(e=null===C||void 0===C?void 0:C.id,we.delete("/users/"+e).then((function(e){return e.data}))).then((function(e){g({page:v}),d({type:"SET_ALERT",payload:{message:"Successfully archived",type:"success"}}),p({value:"",name:"All"})})),E({open:!1})},onDisagree:function(){return E({open:!1})},data:T}),Object(a.jsx)(yt,{label:"Name / Username",labelWidth:130,onSearch:function(e){p({value:"",name:"All"}),x(1),g({page:1,search:e}),r.push("/users?search="+e)},style:{marginBottom:5}}),Object(a.jsx)(Mt,{count:n.total,active:b,onChipSelected:function(e){p(e),c({type:"SET_TOTAL",payload:0}),x(1),g({page:1})},chips:[{value:"",name:"All"}]}),w&&Object(a.jsx)(Rt,{}),!w&&Object(a.jsxs)(f.a,{container:!0,spacing:2,direction:"column",justify:"flex-start",alignItems:"center",children:[n.users.map((function(e){return Object(a.jsx)(f.a,{item:!0,xs:12,children:Object(a.jsx)(Ma,{onArchive:y,user:e})},e.id)})),Object(a.jsx)($e.a,{style:{marginTop:15,marginBottom:15},variant:"outlined",color:"primary",count:n.pages,siblingCount:0,page:v,onChange:function(e,t){}})]}),Object(a.jsx)(et.a,{onClick:function(){return r.push("/users/new")},style:{position:"fixed",bottom:60,right:20},color:"primary","aria-label":"add",children:Object(a.jsx)(nt.a,{})})]})},Ha={username:ae.a.string().alphanum().min(1).max(50).required().label("Username"),password:ae.a.string().min(8).max(50).required().label("Password"),firstname:ce("Firstname").min(1).max(255).required(),middlename:ce("Middlename").min(1).max(255).required(),lastname:ce("Lastname").min(1).max(255).required(),branch:re("Branch"),role:re("Role")},qa=function(){var e=Object(i.useContext)(je),t=Object(s.a)(e,2),n=t[0].currentUser,r=t[1],o=Object(i.useContext)(_n),l=Object(s.a)(o,2),d=l[0],b=l[1],O=c.a.useState(null),h=Object(s.a)(O,2),v=h[0],x=h[1];Object(i.useEffect)((function(){r({type:"SET_TITLE",payload:"User Registration"}),gn().then((function(e){return b({type:"ON_LOAD_BRANCHES",payload:e})}))}),[]);var g=Object(j.g)(),y=c.a.useState({username:"",firstname:"",middlename:"",lastname:"",role:"cashier",password:""}),S=Object(s.a)(y,2),_=S[0],T=S[1],E=function(){var e=Object(Ct.a)(At.a.mark((function e(t){return At.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r({type:"SET_IS_LOADING",payload:!0}),e.abrupt("return",xn(null===t||void 0===t?void 0:t.image,(function(e){return t.image_url=e,delete t.image,Me(t).then((function(){r({type:"SET_ALERT",payload:{message:"Successfully added",type:"success"}}),r({type:"SET_IS_LOADING",payload:!1})}))})));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),L={state:[_,T],onSubmit:E,validator:Ha};return Object(a.jsx)(fn,Object(u.a)(Object(u.a)({},L),{},{children:function(e){var t=e.myInput,i=e.mySelect,c=e.myButton;return Object(a.jsxs)(a.Fragment,{children:[t({label:"Username",value:_.username,name:"username"}),t({label:"Firstname",value:_.firstname,name:"firstname"}),t({label:"Middlename",value:_.middlename,name:"middlename"}),t({label:"Lastname",value:_.lastname,name:"lastname"}),t({label:"Password",value:_.password,name:"password",type:"password"}),i({label:"Role",value:_.role,name:"role",labelWidth:55,options:[{value:"cashier",name:"Cashier"}]}),i({label:"Branch",value:_.branch,name:"branch",labelWidth:55,options:d.branches.map((function(e){return{value:e.id,name:e.name}}))}),Object(a.jsxs)(f.a,{container:!0,style:{paddingLeft:15,paddingRight:15,marginBottom:10},alignItems:"center",justify:"space-between",xs:12,children:[Object(a.jsx)(m.a,{variant:"subtitle1",children:(null===v||void 0===v?void 0:v.name)||"Select Photo"}),Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)("input",{accept:"image/*",style:{display:"none"},name:"image",id:"icon-button-file",type:"file",onChange:function(e){x(e.target.files[0])}}),Object(a.jsx)("label",{htmlFor:"icon-button-file",children:Object(a.jsx)(p.a,{color:"primary","aria-label":"upload picture",component:"span",children:Object(a.jsx)($t.a,{})})})]})]}),Object(a.jsxs)(f.a,{style:{paddingLeft:18,paddingTop:10,paddingBottom:5},container:!0,xs:12,justify:"center",spacing:2,children:[Object(a.jsx)(f.a,{item:!0,xs:6,children:"admin"===(null===n||void 0===n?void 0:n.role)&&Object(a.jsx)(fe.a,{onClick:function(){return g.goBack()},fullWidth:!0,variant:"contained",color:"default",children:"BACK"})}),Object(a.jsx)(f.a,{item:!0,xs:6,children:c()})]})]})}}))},Ka={username:ae.a.string().alphanum().min(1).max(50).required().label("Username"),firstname:ce("Firstname").min(1).max(255).required(),middlename:ce("Middlename").min(1).max(255).required(),lastname:ce("Lastname").min(1).max(255).required(),branch:re("Branch"),role:re("Role")},za=function(){var e=Object(i.useContext)(je),t=Object(s.a)(e,2),n=t[0].currentUser,r=t[1],o=Object(j.i)(),l=Object(i.useContext)(_n),d=Object(s.a)(l,2),m=d[0],b=d[1],p=c.a.useState(null),O=Object(s.a)(p,2),h=(O[0],O[1],c.a.useState({username:"",firstname:"",middlename:"",lastname:"",role:"cashier",password:""})),v=Object(s.a)(h,2),x=v[0],g=v[1];Object(i.useEffect)((function(){var e;r({type:"SET_TITLE",payload:"Edit User"}),(e=+o.id,we.get("/users/"+e).then((function(e){var t,n=e.data;return Object(u.a)(Object(u.a)({},n),{},{branch:null===(t=n.branch)||void 0===t?void 0:t.id})}))).then((function(e){return g(e)})),gn().then((function(e){return b({type:"ON_LOAD_BRANCHES",payload:e})}))}),[]);var y=Object(j.g)(),S=function(){var e=Object(Ct.a)(At.a.mark((function e(t){return At.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r({type:"SET_IS_LOADING",payload:!0}),e.abrupt("return",xn(null===t||void 0===t?void 0:t.image,(function(e){return t.image_url=e,delete t.image,Pe(t).then((function(){r({type:"SET_ALERT",payload:{message:"Successfully added",type:"success"}}),r({type:"SET_IS_LOADING",payload:!1})}))})));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),_={state:[x,g],onSubmit:S,validator:Ka};return Object(a.jsx)(fn,Object(u.a)(Object(u.a)({},_),{},{children:function(e){var t=e.myControlledInput,i=e.mySelect,c=e.myButton;return Object(a.jsxs)(a.Fragment,{children:[t({label:"Username",value:x.username,name:"username"}),t({label:"Firstname",value:x.firstname,name:"firstname"}),t({label:"Middlename",value:x.middlename,name:"middlename"}),t({label:"Lastname",value:x.lastname,name:"lastname"}),i({label:"Role",value:x.role,name:"role",labelWidth:55,options:[{value:"cashier",name:"Cashier"}]}),i({label:"Branch",value:x.branch,name:"branch",labelWidth:55,options:m.branches.map((function(e){return{value:e.id,name:e.name}}))}),Object(a.jsxs)(f.a,{style:{paddingLeft:18,paddingTop:10,paddingBottom:5},container:!0,xs:12,justify:"center",spacing:2,children:[Object(a.jsx)(f.a,{item:!0,xs:6,children:"admin"===(null===n||void 0===n?void 0:n.role)&&Object(a.jsx)(fe.a,{onClick:function(){return y.goBack()},fullWidth:!0,variant:"contained",color:"default",children:"BACK"})}),Object(a.jsx)(f.a,{item:!0,xs:6,children:c()})]})]})}}))},Va=function(){var e=Object(i.useContext)(je),t=Object(s.a)(e,2),n=(t[0].currentUser,t[1]),r=(Object(j.i)(),Object(i.useContext)(_n)),o=Object(s.a)(r,2),l=o[0],d=o[1],b=c.a.useState(null),O=Object(s.a)(b,2),h=O[0],v=O[1],x=c.a.useState({username:"",firstname:"",middlename:"",lastname:"",role:"cashier",password:"",new_password:""}),g=Object(s.a)(x,2),y=g[0],S=g[1];Object(i.useEffect)((function(){n({type:"SET_TITLE",payload:"Account Settings"}),We().then((function(e){var t;S(Object(u.a)(Object(u.a)({},e),{},{branch:null===e||void 0===e||null===(t=e.branch)||void 0===t?void 0:t.id}))})),gn().then((function(e){return d({type:"ON_LOAD_BRANCHES",payload:e})}))}),[]);Object(j.g)();var _=function(){var e=Object(Ct.a)(At.a.mark((function e(t){return At.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n({type:"SET_IS_LOADING",payload:!0}),e.abrupt("return",xn(null===t||void 0===t?void 0:t.image,(function(e){return t.image_url=e,delete t.image,Ge(t).then((function(e){var t=e.access_token;n({type:"SET_ALERT",payload:{message:"Successfully updated",type:"success"}}),n({type:"SET_IS_LOADING",payload:!1}),se(t),n({type:"SET_CURRENT_USER",payload:le()}),window.location.href="/dashboard"}))})).catch((function(e){var t=e.response;401===t.status&&(n({type:"SET_IS_LOADING",payload:!1}),n({type:"SET_ALERT",payload:{message:t.data.error,type:"error"}}))})));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),T=Object(ut.a)(Ka,["role","branch"]),E={state:[y,S],onSubmit:_,validator:"admin"!==y.role?T:Ka};return Object(a.jsx)(fn,Object(u.a)(Object(u.a)({},E),{},{children:function(e){var t=e.myControlledInput,n=e.mySelect,i=e.myButton;return Object(a.jsxs)(a.Fragment,{children:[t({label:"Username",value:y.username,name:"username"}),t({label:"Firstname",value:y.firstname,name:"firstname"}),t({label:"Middlename",value:y.middlename,name:"middlename"}),t({label:"Lastname",value:y.lastname,name:"lastname"}),"admin"===y.role&&n({label:"Role",value:y.role,name:"role",labelWidth:55,options:[{value:"cashier",name:"Cashier"},{value:"admin",name:"Admin"}]}),"admin"===y.role&&n({label:"Branch",value:null===y||void 0===y?void 0:y.branch,name:"branch",labelWidth:55,options:l.branches.map((function(e){return{value:e.id,name:e.name}}))}),t({label:"Current Password",value:y.password,name:"password",type:"password"}),t({label:"New Password",value:y.new_password,name:"new_password",type:"password"}),Object(a.jsxs)(f.a,{container:!0,style:{paddingLeft:15,paddingRight:15,marginBottom:10},alignItems:"center",justify:"space-between",xs:12,children:[Object(a.jsx)(m.a,{variant:"subtitle1",children:(null===h||void 0===h?void 0:h.name)||"Select Photo"}),Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)("input",{accept:"image/*",style:{display:"none"},name:"image",id:"icon-button-file",type:"file",onChange:function(e){v(e.target.files[0])}}),Object(a.jsx)("label",{htmlFor:"icon-button-file",children:Object(a.jsx)(p.a,{color:"primary","aria-label":"upload picture",component:"span",children:Object(a.jsx)($t.a,{})})})]})]}),Object(a.jsxs)(f.a,{style:{paddingLeft:18,paddingTop:10,paddingBottom:5},container:!0,xs:12,justify:"center",spacing:2,children:[Object(a.jsx)(f.a,{item:!0,xs:6}),Object(a.jsx)(f.a,{item:!0,xs:6,children:i()})]})]})}}))},Ya=z()((function(e){return{container:{padding:20,paddingTop:80,height:"100%",backgroundColor:e.palette.background.default}}})),Xa=function(){var e=Ya();return Object(a.jsx)(Qe.a,{maxWidth:"xs",className:e.container,children:Object(a.jsxs)(j.d,{children:[Object(a.jsx)(oa,{isAdmin:!0,path:"/users/edit/:id",component:za}),Object(a.jsx)(oa,{isAdmin:!0,path:"/users/new",component:qa}),Object(a.jsx)(oa,{isAdmin:!0,path:"/users",component:Ua}),Object(a.jsx)(oa,{path:"/commissions",component:Na}),Object(a.jsx)(oa,{path:"/transaction/releases",component:Da}),Object(a.jsx)(oa,{path:"/transaction/encode",component:ja}),Object(a.jsx)(oa,{isAdmin:!0,path:"/branches/new",component:La}),Object(a.jsx)(oa,{isAdmin:!0,path:"/branches/edit/:id",component:Aa}),Object(a.jsx)(oa,{isAdmin:!0,path:"/branches",component:Ta}),Object(a.jsx)(oa,{isAdmin:!0,path:"/payments/:id",component:Sa}),Object(a.jsx)(oa,{isAdmin:!0,path:"/payments",component:ga}),Object(a.jsx)(oa,{path:"/settings/general",component:pa}),Object(a.jsx)(oa,{path:"/settings/account",component:Va}),Object(a.jsx)(oa,{path:"/clients/new",component:na}),Object(a.jsx)(oa,{isAdmin:!0,path:"/clients/edit/:id",component:Oa}),Object(a.jsx)(oa,{isAdmin:!0,path:"/clients/:id",component:qn}),Object(a.jsx)(oa,{isAdmin:!0,path:"/clients",component:Hn}),Object(a.jsx)(oa,{path:"/employees/new",component:Ln}),Object(a.jsx)(oa,{isAdmin:!0,path:"/employees/edit/:id",component:An}),Object(a.jsx)(oa,{isAdmin:!0,path:"/employees/:id",component:Qt}),Object(a.jsx)(oa,{isAdmin:!0,path:"/employees",component:qt}),Object(a.jsx)(oa,{path:"/dashboard",component:Ze}),Object(a.jsx)(la,{path:"/signin",component:ra}),Object(a.jsx)(j.b,{path:"/not-found",component:Fa}),Object(a.jsx)(j.a,{from:"/",exact:!0,to:"/dashboard"}),Object(a.jsx)(j.a,{to:"/not-found"})]})})},Ja=n.p+"static/media/wave.d4fbcc67.svg",Qa=function(e){var t=Object(i.useContext)(je),n=Object(s.a)(t,2),c=n[0];n[1];return Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)(d.a,{}),Object(a.jsx)(Je,{}),!c.currentUser&&Object(a.jsx)("img",{style:{position:"absolute",top:0},width:"100%",src:Ja,alt:"wave logo"}),c.currentUser&&Object(a.jsx)(Ve,{}),Object(a.jsx)(En,{children:Object(a.jsx)(Wa,{children:Object(a.jsx)(Et,{children:Object(a.jsx)(Wn,{children:Object(a.jsx)(fa,{children:Object(a.jsx)(wa,{children:Object(a.jsx)(Xa,{})})})})})})})]})};n(342);o.a.render(Object(a.jsx)(l.a,{children:Object(a.jsx)(be,{children:Object(a.jsx)(Qa,{})})}),document.getElementById("root"))}},[[343,1,2]]]);
//# sourceMappingURL=main.1872f05f.chunk.js.map